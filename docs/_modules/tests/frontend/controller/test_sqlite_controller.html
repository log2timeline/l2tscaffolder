<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>tests.frontend.controller.test_sqlite_controller &#8212; Plaso Sqlite Plugin Scaffolder 20170614 documentation</title>
    
    <link rel="stylesheet" href="../../../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../../',
        VERSION:     '20170614',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../../index.html">Plaso Sqlite Plugin Scaffolder 20170614 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../../index.html" accesskey="U">Module code</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for tests.frontend.controller.test_sqlite_controller</h1><div class="highlight"><pre>
<span></span><span class="c1"># !/usr/bin/python</span>
<span class="c1"># -*- coding: utf-8 -*-</span>
<span class="sd">&quot;&quot;&quot;test class&quot;&quot;&quot;</span>
<span class="c1"># pylint: disable=protected-access</span>
<span class="c1"># because tests should access protected members</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">pathlib</span>
<span class="kn">import</span> <span class="nn">tempfile</span>
<span class="kn">import</span> <span class="nn">unittest</span>
<span class="kn">from</span> <span class="nn">unittest</span> <span class="k">import</span> <span class="n">mock</span>

<span class="kn">from</span> <span class="nn">plasoscaffolder.bll.services</span> <span class="k">import</span> <span class="n">sqlite_plugin_helper</span>
<span class="kn">from</span> <span class="nn">plasoscaffolder.common</span> <span class="k">import</span> <span class="n">file_handler</span>
<span class="kn">from</span> <span class="nn">plasoscaffolder.dal</span> <span class="k">import</span> <span class="n">sql_query_data</span>
<span class="kn">from</span> <span class="nn">plasoscaffolder.frontend.controller</span> <span class="k">import</span> <span class="n">sqlite_controller</span>
<span class="kn">from</span> <span class="nn">plasoscaffolder.model</span> <span class="k">import</span> <span class="p">(</span><span class="n">sql_query_column_model</span><span class="p">,</span>
                                   <span class="n">sql_query_column_model_data</span><span class="p">,</span> <span class="n">sql_query_model</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">tests.fake</span> <span class="k">import</span> <span class="n">fake_sqlite_plugin_helper</span>
<span class="kn">from</span> <span class="nn">tests.fake</span> <span class="k">import</span> <span class="n">fake_sqlite_query_execution</span>
<span class="kn">from</span> <span class="nn">tests.test_helper</span> <span class="k">import</span> <span class="n">output_handler_file</span>
<span class="kn">from</span> <span class="nn">tests.test_helper</span> <span class="k">import</span> <span class="n">path_helper</span>


<div class="viewcode-block" id="SQLiteControllerTest"><a class="viewcode-back" href="../../../../tests.frontend.controller.html#tests.frontend.controller.test_sqlite_controller.SQLiteControllerTest">[docs]</a><span class="k">class</span> <span class="nc">SQLiteControllerTest</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot;Tests the SQLite controller&quot;&quot;&quot;</span>

<div class="viewcode-block" id="SQLiteControllerTest.testPluginNameIfExisting"><a class="viewcode-back" href="../../../../tests.frontend.controller.html#tests.frontend.controller.test_sqlite_controller.SQLiteControllerTest.testPluginNameIfExisting">[docs]</a>  <span class="k">def</span> <span class="nf">testPluginNameIfExisting</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;test method after getting the plugin Name from the user if the plugin</span>
<span class="sd">    Name already exists&quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">TemporaryDirectory</span><span class="p">()</span> <span class="k">as</span> <span class="n">tmpdir</span><span class="p">:</span>
      <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">,</span> <span class="s1">&#39;testfile&#39;</span><span class="p">)</span>
      <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="o">.</span><span class="n">touch</span><span class="p">()</span>

      <span class="n">output_handler</span> <span class="o">=</span> <span class="n">output_handler_file</span><span class="o">.</span><span class="n">OutputHandlerFile</span><span class="p">(</span>
          <span class="n">path</span><span class="p">,</span> <span class="n">file_handler</span><span class="o">.</span><span class="n">FileHandler</span><span class="p">(),</span> <span class="n">prompt_info</span><span class="o">=</span><span class="s1">&#39;the_plugin&#39;</span><span class="p">,</span>
          <span class="n">prompt_error</span><span class="o">=</span><span class="s1">&#39;the_plugin&#39;</span><span class="p">,</span> <span class="p">)</span>
      <span class="n">plugin_helper</span> <span class="o">=</span> <span class="n">fake_sqlite_plugin_helper</span><span class="o">.</span><span class="n">FakeSQLitePluginHelper</span><span class="p">(</span>
          <span class="n">plugin_exists</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">change_bool_after_every_call_plugin_exists</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
          <span class="n">valid_name</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
      <span class="n">controller</span> <span class="o">=</span> <span class="n">sqlite_controller</span><span class="o">.</span><span class="n">SQLiteController</span><span class="p">(</span><span class="n">output_handler</span><span class="p">,</span>
                                                      <span class="n">plugin_helper</span><span class="p">)</span>
      <span class="n">actualName</span> <span class="o">=</span> <span class="s1">&#39;the_plugin&#39;</span>
      <span class="n">controller</span><span class="o">.</span><span class="n">_path</span> <span class="o">=</span> <span class="s1">&#39;somepath&#39;</span>
      <span class="n">actual</span> <span class="o">=</span> <span class="n">controller</span><span class="o">.</span><span class="n">PluginName</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">actualName</span><span class="p">)</span>
      <span class="n">expected</span> <span class="o">=</span> <span class="s1">&#39;Plugin exists. Choose new Name&#39;</span>
      <span class="n">actual_prompt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ReadFromFile</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">actual_prompt</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">actualName</span><span class="p">,</span> <span class="n">actual</span><span class="p">)</span></div>

<div class="viewcode-block" id="SQLiteControllerTest.testPluginNameIfNotExisting"><a class="viewcode-back" href="../../../../tests.frontend.controller.html#tests.frontend.controller.test_sqlite_controller.SQLiteControllerTest.testPluginNameIfNotExisting">[docs]</a>  <span class="k">def</span> <span class="nf">testPluginNameIfNotExisting</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;test method after getting tplugin Name from the user if the plugin</span>
<span class="sd">    Name is new&quot;&quot;&quot;</span>

    <span class="n">output_handler</span> <span class="o">=</span> <span class="n">output_handler_file</span><span class="o">.</span><span class="n">OutputHandlerFile</span><span class="p">(</span>
        <span class="s1">&#39;somefile&#39;</span><span class="p">,</span> <span class="n">file_handler</span><span class="o">.</span><span class="n">FileHandler</span><span class="p">())</span>
    <span class="n">plugin_helper</span> <span class="o">=</span> <span class="n">fake_sqlite_plugin_helper</span><span class="o">.</span><span class="n">FakeSQLitePluginHelper</span><span class="p">(</span>
        <span class="n">plugin_exists</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">controller</span> <span class="o">=</span> <span class="n">sqlite_controller</span><span class="o">.</span><span class="n">SQLiteController</span><span class="p">(</span><span class="n">output_handler</span><span class="p">,</span>
                                                    <span class="n">plugin_helper</span><span class="p">)</span>
    <span class="n">actualName</span> <span class="o">=</span> <span class="s1">&#39;the_plugin&#39;</span>
    <span class="n">controller</span><span class="o">.</span><span class="n">_path</span> <span class="o">=</span> <span class="s1">&#39;somepath&#39;</span>
    <span class="n">actual</span> <span class="o">=</span> <span class="n">controller</span><span class="o">.</span><span class="n">PluginName</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">actualName</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">actualName</span><span class="p">,</span> <span class="n">controller</span><span class="o">.</span><span class="n">_name</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">actual</span><span class="p">,</span> <span class="n">actualName</span><span class="p">)</span></div>

<div class="viewcode-block" id="SQLiteControllerTest.testSourcePathIfExisting"><a class="viewcode-back" href="../../../../tests.frontend.controller.html#tests.frontend.controller.test_sqlite_controller.SQLiteControllerTest.testSourcePathIfExisting">[docs]</a>  <span class="k">def</span> <span class="nf">testSourcePathIfExisting</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;test method after getting the source path from the user&quot;&quot;&quot;</span>

    <span class="n">output_handler</span> <span class="o">=</span> <span class="n">output_handler_file</span><span class="o">.</span><span class="n">OutputHandlerFile</span><span class="p">(</span>
        <span class="s1">&#39;somefile&#39;</span><span class="p">,</span> <span class="n">file_handler</span><span class="o">.</span><span class="n">FileHandler</span><span class="p">())</span>
    <span class="n">plugin_helper</span> <span class="o">=</span> <span class="n">fake_sqlite_plugin_helper</span><span class="o">.</span><span class="n">FakeSQLitePluginHelper</span><span class="p">(</span>
        <span class="n">folder_exists</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">controller</span> <span class="o">=</span> <span class="n">sqlite_controller</span><span class="o">.</span><span class="n">SQLiteController</span><span class="p">(</span><span class="n">output_handler</span><span class="p">,</span>
                                                    <span class="n">plugin_helper</span><span class="p">)</span>
    <span class="n">actualPath</span> <span class="o">=</span> <span class="s1">&#39;testpath&#39;</span>
    <span class="n">actual</span> <span class="o">=</span> <span class="n">controller</span><span class="o">.</span><span class="n">SourcePath</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">actualPath</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">actualPath</span><span class="p">,</span> <span class="n">controller</span><span class="o">.</span><span class="n">_path</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">actual</span><span class="p">,</span> <span class="n">actualPath</span><span class="p">)</span></div>

<div class="viewcode-block" id="SQLiteControllerTest.testCreateSQLQueryModelWithUserInputNoError"><a class="viewcode-back" href="../../../../tests.frontend.controller.html#tests.frontend.controller.test_sqlite_controller.SQLiteControllerTest.testCreateSQLQueryModelWithUserInputNoError">[docs]</a>  <span class="k">def</span> <span class="nf">testCreateSQLQueryModelWithUserInputNoError</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;test method CreateEventModelWithUserInput&quot;&quot;&quot;</span>

    <span class="n">fake_execution</span> <span class="o">=</span> <span class="n">fake_sqlite_query_execution</span><span class="o">.</span><span class="n">SQLQueryExecution</span><span class="p">(</span>
        <span class="n">sql_query_data</span><span class="o">.</span><span class="n">SQLQueryData</span><span class="p">(</span><span class="n">has_error</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">sql_query</span> <span class="o">=</span> <span class="s1">&#39;SELECT createdDate FROM Users ORDER BY createdDate&#39;</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Contact&#39;</span>
    <span class="k">with</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">TemporaryDirectory</span><span class="p">()</span> <span class="k">as</span> <span class="n">tmpdir</span><span class="p">:</span>
      <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">,</span> <span class="s1">&#39;testfile&#39;</span><span class="p">)</span>
      <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="o">.</span><span class="n">touch</span><span class="p">()</span>

      <span class="n">output_handler</span> <span class="o">=</span> <span class="n">output_handler_file</span><span class="o">.</span><span class="n">OutputHandlerFile</span><span class="p">(</span>
          <span class="n">path</span><span class="p">,</span> <span class="n">file_handler</span><span class="o">.</span><span class="n">FileHandler</span><span class="p">(),</span>
          <span class="n">confirm</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">confirm_amount_same</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">prompt_info</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
      <span class="n">plugin_helper</span> <span class="o">=</span> <span class="n">fake_sqlite_plugin_helper</span><span class="o">.</span><span class="n">FakeSQLitePluginHelper</span><span class="p">(</span>
          <span class="n">folder_exists</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
      <span class="n">controller</span> <span class="o">=</span> <span class="n">sqlite_controller</span><span class="o">.</span><span class="n">SQLiteController</span><span class="p">(</span><span class="n">output_handler</span><span class="p">,</span>
                                                      <span class="n">plugin_helper</span><span class="p">)</span>
      <span class="n">controller</span><span class="o">.</span><span class="n">GetTimestamps</span> <span class="o">=</span> <span class="n">mock</span><span class="o">.</span><span class="n">MagicMock</span><span class="p">(</span><span class="n">return_value</span><span class="o">=</span><span class="p">([],</span> <span class="p">[]))</span>
      <span class="n">actual</span> <span class="o">=</span> <span class="n">controller</span><span class="o">.</span><span class="n">_CreateSQLQueryModelWithUserInput</span><span class="p">(</span><span class="n">sql_query</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span>
                                                            <span class="n">fake_execution</span><span class="p">)</span>
      <span class="n">prompt_output_actual</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ReadFromFile</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
      <span class="n">prompt_output_expected</span> <span class="o">=</span> <span class="p">(</span>
          <span class="s1">&#39;The SQL query was ok.&#39;</span>
          <span class="s1">&#39;Do you want to name the query parse row:  ?&#39;</span>
          <span class="s1">&#39;Does the event  need customizing?&#39;</span>
          <span class="s1">&#39;Enter columns that are customizable [columnName,aliasName...] &#39;</span>
          <span class="s1">&#39;or [abort]&#39;</span>
          <span class="s1">&#39;Added: Failed: Contact&#39;</span>
          <span class="s1">&#39;Do you want to add more columns that are customizable?&#39;</span><span class="p">)</span>

      <span class="n">expected</span> <span class="o">=</span> <span class="n">sql_query_model</span><span class="o">.</span><span class="n">SQLQueryModel</span><span class="p">(</span>
          <span class="n">sql_query</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="p">[],</span> <span class="p">[],</span> <span class="kc">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">actual</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="o">.</span><span class="n">query</span><span class="p">,</span> <span class="n">actual</span><span class="o">.</span><span class="n">query</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">prompt_output_expected</span><span class="p">,</span> <span class="n">prompt_output_actual</span><span class="p">)</span></div>

<div class="viewcode-block" id="SQLiteControllerTest.testCreateSQLQueryModelWithUserInputWithExamplesAndFourDataExamples"><a class="viewcode-back" href="../../../../tests.frontend.controller.html#tests.frontend.controller.test_sqlite_controller.SQLiteControllerTest.testCreateSQLQueryModelWithUserInputWithExamplesAndFourDataExamples">[docs]</a>  <span class="k">def</span> <span class="nf">testCreateSQLQueryModelWithUserInputWithExamplesAndFourDataExamples</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;test method CreateEventModelWithUserInput with examples&quot;&quot;&quot;</span>

    <span class="n">fake_execution</span> <span class="o">=</span> <span class="n">fake_sqlite_query_execution</span><span class="o">.</span><span class="n">SQLQueryExecution</span><span class="p">(</span>
        <span class="n">sql_query_data</span><span class="o">.</span><span class="n">SQLQueryData</span><span class="p">(</span>
            <span class="n">has_error</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;first&#39;</span><span class="p">,</span> <span class="s1">&#39;second&#39;</span><span class="p">,</span> <span class="s1">&#39;third&#39;</span><span class="p">,</span> <span class="s1">&#39;fourth&#39;</span><span class="p">],</span>
            <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="nb">type</span><span class="p">(</span><span class="s1">&#39;columns&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nb">object</span><span class="p">,),</span> <span class="p">{</span><span class="s1">&#39;sql_column&#39;</span><span class="p">:</span> <span class="s1">&#39;id&#39;</span><span class="p">}),</span>
                     <span class="nb">type</span><span class="p">(</span><span class="s1">&#39;columns&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nb">object</span><span class="p">,),</span> <span class="p">{</span><span class="s1">&#39;sql_column&#39;</span><span class="p">:</span> <span class="s1">&#39;name&#39;</span><span class="p">})])</span>
    <span class="p">)</span>
    <span class="n">sql_query</span> <span class="o">=</span> <span class="s1">&#39;SELECT id from Users&#39;</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Contact&#39;</span>
    <span class="k">with</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">TemporaryDirectory</span><span class="p">()</span> <span class="k">as</span> <span class="n">tmpdir</span><span class="p">:</span>
      <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">,</span> <span class="s1">&#39;testfile&#39;</span><span class="p">)</span>
      <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="o">.</span><span class="n">touch</span><span class="p">()</span>

      <span class="n">output_handler</span> <span class="o">=</span> <span class="n">output_handler_file</span><span class="o">.</span><span class="n">OutputHandlerFile</span><span class="p">(</span>
          <span class="n">path</span><span class="p">,</span> <span class="n">file_handler</span><span class="o">.</span><span class="n">FileHandler</span><span class="p">(),</span>
          <span class="n">confirm</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">confirm_amount_same</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">prompt_info</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
      <span class="n">plugin_helper</span> <span class="o">=</span> <span class="n">fake_sqlite_plugin_helper</span><span class="o">.</span><span class="n">FakeSQLitePluginHelper</span><span class="p">(</span>
          <span class="n">folder_exists</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
      <span class="n">controller</span> <span class="o">=</span> <span class="n">sqlite_controller</span><span class="o">.</span><span class="n">SQLiteController</span><span class="p">(</span><span class="n">output_handler</span><span class="p">,</span>
                                                      <span class="n">plugin_helper</span><span class="p">)</span>
      <span class="n">controller</span><span class="o">.</span><span class="n">GetTimestamps</span> <span class="o">=</span> <span class="n">mock</span><span class="o">.</span><span class="n">MagicMock</span><span class="p">(</span><span class="n">return_value</span><span class="o">=</span><span class="p">([],</span> <span class="p">[]))</span>
      <span class="n">actual</span> <span class="o">=</span> <span class="n">controller</span><span class="o">.</span><span class="n">_CreateSQLQueryModelWithUserInput</span><span class="p">(</span><span class="n">sql_query</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span>
                                                            <span class="n">fake_execution</span><span class="p">)</span>
      <span class="n">prompt_output_actual</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ReadFromFile</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
      <span class="n">prompt_output_expected</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;Your query output could look like this.&#39;</span>
                                <span class="s1">&#39;[</span><span class="se">\&#39;</span><span class="s1">id</span><span class="se">\&#39;</span><span class="s1">, </span><span class="se">\&#39;</span><span class="s1">name</span><span class="se">\&#39;</span><span class="s1">]&#39;</span>
                                <span class="s1">&#39;first&#39;</span>
                                <span class="s1">&#39;second&#39;</span>
                                <span class="s1">&#39;third&#39;</span>
                                <span class="s1">&#39;Do you want to add this query?&#39;</span>
                                <span class="s1">&#39;Do you want to name the query parse row:  ?&#39;</span>
                                <span class="s1">&#39;Does the event  need customizing?&#39;</span><span class="p">)</span>

      <span class="n">expected</span> <span class="o">=</span> <span class="n">sql_query_model</span><span class="o">.</span><span class="n">SQLQueryModel</span><span class="p">(</span><span class="n">sql_query</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="p">[],</span> <span class="p">[],</span> <span class="kc">False</span><span class="p">,</span>
                                               <span class="mi">0</span><span class="p">)</span>

      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">actual</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="o">.</span><span class="n">query</span><span class="p">,</span> <span class="n">actual</span><span class="o">.</span><span class="n">query</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">prompt_output_expected</span><span class="p">,</span> <span class="n">prompt_output_actual</span><span class="p">)</span></div>

<div class="viewcode-block" id="SQLiteControllerTest.testCreateSQLQueryModelWithUserInputWithExamplesAndTwoDataExamples"><a class="viewcode-back" href="../../../../tests.frontend.controller.html#tests.frontend.controller.test_sqlite_controller.SQLiteControllerTest.testCreateSQLQueryModelWithUserInputWithExamplesAndTwoDataExamples">[docs]</a>  <span class="k">def</span> <span class="nf">testCreateSQLQueryModelWithUserInputWithExamplesAndTwoDataExamples</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;test method CreateEventModelWithUserInput with examples&quot;&quot;&quot;</span>

    <span class="n">fake_execution</span> <span class="o">=</span> <span class="n">fake_sqlite_query_execution</span><span class="o">.</span><span class="n">SQLQueryExecution</span><span class="p">(</span>
        <span class="n">sql_query_data</span><span class="o">.</span><span class="n">SQLQueryData</span><span class="p">(</span>
            <span class="n">has_error</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;first&#39;</span><span class="p">,</span> <span class="s1">&#39;second&#39;</span><span class="p">],</span>
            <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="nb">type</span><span class="p">(</span><span class="s1">&#39;columns&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nb">object</span><span class="p">,),</span> <span class="p">{</span><span class="s1">&#39;sql_column&#39;</span><span class="p">:</span> <span class="s1">&#39;id&#39;</span><span class="p">}),</span>
                     <span class="nb">type</span><span class="p">(</span><span class="s1">&#39;columns&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nb">object</span><span class="p">,),</span> <span class="p">{</span><span class="s1">&#39;sql_column&#39;</span><span class="p">:</span> <span class="s1">&#39;name&#39;</span><span class="p">})])</span>
    <span class="p">)</span>
    <span class="n">sql_query</span> <span class="o">=</span> <span class="s1">&#39;SELECT id from Users&#39;</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Contact&#39;</span>
    <span class="k">with</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">TemporaryDirectory</span><span class="p">()</span> <span class="k">as</span> <span class="n">tmpdir</span><span class="p">:</span>
      <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">,</span> <span class="s1">&#39;testfile&#39;</span><span class="p">)</span>
      <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="o">.</span><span class="n">touch</span><span class="p">()</span>

      <span class="n">output_handler</span> <span class="o">=</span> <span class="n">output_handler_file</span><span class="o">.</span><span class="n">OutputHandlerFile</span><span class="p">(</span>
          <span class="n">path</span><span class="p">,</span> <span class="n">file_handler</span><span class="o">.</span><span class="n">FileHandler</span><span class="p">(),</span>
          <span class="n">confirm</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">confirm_amount_same</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">prompt_info</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
      <span class="n">plugin_helper</span> <span class="o">=</span> <span class="n">fake_sqlite_plugin_helper</span><span class="o">.</span><span class="n">FakeSQLitePluginHelper</span><span class="p">(</span>
          <span class="n">folder_exists</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
      <span class="n">controller</span> <span class="o">=</span> <span class="n">sqlite_controller</span><span class="o">.</span><span class="n">SQLiteController</span><span class="p">(</span><span class="n">output_handler</span><span class="p">,</span>
                                                      <span class="n">plugin_helper</span><span class="p">)</span>
      <span class="n">controller</span><span class="o">.</span><span class="n">GetTimestamps</span> <span class="o">=</span> <span class="n">mock</span><span class="o">.</span><span class="n">MagicMock</span><span class="p">(</span><span class="n">return_value</span><span class="o">=</span><span class="p">([],</span> <span class="p">[]))</span>
      <span class="n">actual</span> <span class="o">=</span> <span class="n">controller</span><span class="o">.</span><span class="n">_CreateSQLQueryModelWithUserInput</span><span class="p">(</span><span class="n">sql_query</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span>
                                                            <span class="n">fake_execution</span><span class="p">)</span>
      <span class="n">prompt_output_actual</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ReadFromFile</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
      <span class="n">prompt_output_expected</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;Your query output could look like this.&#39;</span>
                                <span class="s1">&#39;[</span><span class="se">\&#39;</span><span class="s1">id</span><span class="se">\&#39;</span><span class="s1">, </span><span class="se">\&#39;</span><span class="s1">name</span><span class="se">\&#39;</span><span class="s1">]&#39;</span>
                                <span class="s1">&#39;first&#39;</span>
                                <span class="s1">&#39;second&#39;</span>
                                <span class="s1">&#39;Do you want to add this query?&#39;</span>
                                <span class="s1">&#39;Do you want to name the query parse row:  ?&#39;</span>
                                <span class="s1">&#39;Does the event  need customizing?&#39;</span><span class="p">)</span>

      <span class="n">expected</span> <span class="o">=</span> <span class="n">sql_query_model</span><span class="o">.</span><span class="n">SQLQueryModel</span><span class="p">(</span>
          <span class="n">sql_query</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="p">[],</span> <span class="p">[],</span> <span class="kc">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">actual</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="o">.</span><span class="n">query</span><span class="p">,</span> <span class="n">actual</span><span class="o">.</span><span class="n">query</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">prompt_output_expected</span><span class="p">,</span> <span class="n">prompt_output_actual</span><span class="p">)</span></div>

<div class="viewcode-block" id="SQLiteControllerTest.testCreateSQLQueryModelWithUserInputWithExamplesAndOneDataExamples"><a class="viewcode-back" href="../../../../tests.frontend.controller.html#tests.frontend.controller.test_sqlite_controller.SQLiteControllerTest.testCreateSQLQueryModelWithUserInputWithExamplesAndOneDataExamples">[docs]</a>  <span class="k">def</span> <span class="nf">testCreateSQLQueryModelWithUserInputWithExamplesAndOneDataExamples</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;test method CreateEventModelWithUserInput with examples&quot;&quot;&quot;</span>

    <span class="n">fake_execution</span> <span class="o">=</span> <span class="n">fake_sqlite_query_execution</span><span class="o">.</span><span class="n">SQLQueryExecution</span><span class="p">(</span>
        <span class="n">sql_query_data</span><span class="o">.</span><span class="n">SQLQueryData</span><span class="p">(</span>
            <span class="n">has_error</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;first&#39;</span><span class="p">],</span>
            <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="nb">type</span><span class="p">(</span><span class="s1">&#39;columns&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nb">object</span><span class="p">,),</span> <span class="p">{</span><span class="s1">&#39;sql_column&#39;</span><span class="p">:</span> <span class="s1">&#39;id&#39;</span><span class="p">}),</span>
                     <span class="nb">type</span><span class="p">(</span><span class="s1">&#39;columns&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nb">object</span><span class="p">,),</span> <span class="p">{</span><span class="s1">&#39;sql_column&#39;</span><span class="p">:</span> <span class="s1">&#39;name&#39;</span><span class="p">})])</span>
    <span class="p">)</span>
    <span class="n">sql_query</span> <span class="o">=</span> <span class="s1">&#39;SELECT id from Users&#39;</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Contact&#39;</span>
    <span class="k">with</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">TemporaryDirectory</span><span class="p">()</span> <span class="k">as</span> <span class="n">tmpdir</span><span class="p">:</span>
      <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">,</span> <span class="s1">&#39;testfile&#39;</span><span class="p">)</span>
      <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="o">.</span><span class="n">touch</span><span class="p">()</span>

      <span class="n">output_handler</span> <span class="o">=</span> <span class="n">output_handler_file</span><span class="o">.</span><span class="n">OutputHandlerFile</span><span class="p">(</span>
          <span class="n">path</span><span class="p">,</span> <span class="n">file_handler</span><span class="o">.</span><span class="n">FileHandler</span><span class="p">(),</span>
          <span class="n">confirm</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">confirm_amount_same</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">prompt_info</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
      <span class="n">plugin_helper</span> <span class="o">=</span> <span class="n">fake_sqlite_plugin_helper</span><span class="o">.</span><span class="n">FakeSQLitePluginHelper</span><span class="p">(</span>
          <span class="n">folder_exists</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
      <span class="n">controller</span> <span class="o">=</span> <span class="n">sqlite_controller</span><span class="o">.</span><span class="n">SQLiteController</span><span class="p">(</span><span class="n">output_handler</span><span class="p">,</span>
                                                      <span class="n">plugin_helper</span><span class="p">)</span>
      <span class="n">controller</span><span class="o">.</span><span class="n">GetTimestamps</span> <span class="o">=</span> <span class="n">mock</span><span class="o">.</span><span class="n">MagicMock</span><span class="p">(</span><span class="n">return_value</span><span class="o">=</span><span class="p">([],</span> <span class="p">[]))</span>
      <span class="n">actual</span> <span class="o">=</span> <span class="n">controller</span><span class="o">.</span><span class="n">_CreateSQLQueryModelWithUserInput</span><span class="p">(</span><span class="n">sql_query</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span>
                                                            <span class="n">fake_execution</span><span class="p">)</span>
      <span class="n">prompt_output_actual</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ReadFromFile</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
      <span class="n">prompt_output_expected</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;Your query output could look like this.&#39;</span>
                                <span class="s1">&#39;[</span><span class="se">\&#39;</span><span class="s1">id</span><span class="se">\&#39;</span><span class="s1">, </span><span class="se">\&#39;</span><span class="s1">name</span><span class="se">\&#39;</span><span class="s1">]&#39;</span>
                                <span class="s1">&#39;first&#39;</span>
                                <span class="s1">&#39;Do you want to add this query?&#39;</span>
                                <span class="s1">&#39;Do you want to name the query parse row:  ?&#39;</span>
                                <span class="s1">&#39;Does the event  need customizing?&#39;</span><span class="p">)</span>

      <span class="n">expected</span> <span class="o">=</span> <span class="n">sql_query_model</span><span class="o">.</span><span class="n">SQLQueryModel</span><span class="p">(</span><span class="n">sql_query</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="p">[],</span> <span class="p">[],</span> <span class="kc">False</span><span class="p">,</span>
                                               <span class="mi">0</span><span class="p">)</span>

      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">actual</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="o">.</span><span class="n">query</span><span class="p">,</span> <span class="n">actual</span><span class="o">.</span><span class="n">query</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">prompt_output_expected</span><span class="p">,</span> <span class="n">prompt_output_actual</span><span class="p">)</span></div>

<div class="viewcode-block" id="SQLiteControllerTest.testCreateSQLQueryModelWithUserInputExamplesNewRowNameValidationError"><a class="viewcode-back" href="../../../../tests.frontend.controller.html#tests.frontend.controller.test_sqlite_controller.SQLiteControllerTest.testCreateSQLQueryModelWithUserInputExamplesNewRowNameValidationError">[docs]</a>  <span class="k">def</span> <span class="nf">testCreateSQLQueryModelWithUserInputExamplesNewRowNameValidationError</span><span class="p">(</span>
      <span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;test method CreateEventModelWithUserInput with examples&quot;&quot;&quot;</span>

    <span class="n">fake_execution</span> <span class="o">=</span> <span class="n">fake_sqlite_query_execution</span><span class="o">.</span><span class="n">SQLQueryExecution</span><span class="p">(</span>
        <span class="n">sql_query_data</span><span class="o">.</span><span class="n">SQLQueryData</span><span class="p">(</span>
            <span class="n">has_error</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;first&#39;</span><span class="p">],</span>
            <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="nb">type</span><span class="p">(</span><span class="s1">&#39;columns&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nb">object</span><span class="p">,),</span> <span class="p">{</span><span class="s1">&#39;sql_column&#39;</span><span class="p">:</span> <span class="s1">&#39;id&#39;</span><span class="p">}),</span>
                     <span class="nb">type</span><span class="p">(</span><span class="s1">&#39;columns&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nb">object</span><span class="p">,),</span> <span class="p">{</span><span class="s1">&#39;sql_column&#39;</span><span class="p">:</span> <span class="s1">&#39;name&#39;</span><span class="p">})])</span>
    <span class="p">)</span>
    <span class="n">sql_query</span> <span class="o">=</span> <span class="s1">&#39;SELECT id from Users&#39;</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Contact&#39;</span>
    <span class="n">name2</span> <span class="o">=</span> <span class="s1">&#39;TheCorrectContanctName&#39;</span>

    <span class="k">with</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">TemporaryDirectory</span><span class="p">()</span> <span class="k">as</span> <span class="n">tmpdir</span><span class="p">:</span>
      <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">,</span> <span class="s1">&#39;testfile&#39;</span><span class="p">)</span>
      <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="o">.</span><span class="n">touch</span><span class="p">()</span>

      <span class="n">output_handler</span> <span class="o">=</span> <span class="n">output_handler_file</span><span class="o">.</span><span class="n">OutputHandlerFile</span><span class="p">(</span>
          <span class="n">path</span><span class="p">,</span> <span class="n">file_handler</span><span class="o">.</span><span class="n">FileHandler</span><span class="p">(),</span>
          <span class="n">confirm</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">confirm_amount_same</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">prompt_info</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
          <span class="n">prompt_error</span><span class="o">=</span><span class="n">name2</span><span class="p">)</span>
      <span class="n">plugin_helper</span> <span class="o">=</span> <span class="n">fake_sqlite_plugin_helper</span><span class="o">.</span><span class="n">FakeSQLitePluginHelper</span><span class="p">(</span>
          <span class="n">folder_exists</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">valid_row_name</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
          <span class="n">change_bool_after_every_call_valid_row_name</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
      <span class="n">controller</span> <span class="o">=</span> <span class="n">sqlite_controller</span><span class="o">.</span><span class="n">SQLiteController</span><span class="p">(</span><span class="n">output_handler</span><span class="p">,</span>
                                                      <span class="n">plugin_helper</span><span class="p">)</span>
      <span class="n">controller</span><span class="o">.</span><span class="n">GetTimestamps</span> <span class="o">=</span> <span class="n">mock</span><span class="o">.</span><span class="n">MagicMock</span><span class="p">(</span><span class="n">return_value</span><span class="o">=</span><span class="p">([],</span> <span class="p">[]))</span>
      <span class="n">actual</span> <span class="o">=</span> <span class="n">controller</span><span class="o">.</span><span class="n">_CreateSQLQueryModelWithUserInput</span><span class="p">(</span><span class="n">sql_query</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span>
                                                            <span class="n">fake_execution</span><span class="p">)</span>
      <span class="n">prompt_output_actual</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ReadFromFile</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
      <span class="n">prompt_output_expected</span> <span class="o">=</span> <span class="p">(</span>
          <span class="s1">&#39;Your query output could look like this.&#39;</span>
          <span class="s1">&#39;[</span><span class="se">\&#39;</span><span class="s1">id</span><span class="se">\&#39;</span><span class="s1">, </span><span class="se">\&#39;</span><span class="s1">name</span><span class="se">\&#39;</span><span class="s1">]&#39;</span>
          <span class="s1">&#39;first&#39;</span>
          <span class="s1">&#39;Do you want to add this query?&#39;</span>
          <span class="s1">&#39;Do you want to name the query parse row:  ?&#39;</span>
          <span class="s1">&#39;What row does the SQL Query parse?&#39;</span>
          <span class="s1">&#39;Row name is not in a valid format. Choose new Name [RowName...]&#39;</span>
          <span class="s1">&#39;Does the event TheCorrectContanctName need customizing?&#39;</span><span class="p">)</span>
      <span class="n">expected</span> <span class="o">=</span> <span class="n">sql_query_model</span><span class="o">.</span><span class="n">SQLQueryModel</span><span class="p">(</span><span class="n">sql_query</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="p">[],</span> <span class="p">[],</span> <span class="kc">False</span><span class="p">,</span>
                                               <span class="mi">0</span><span class="p">)</span>

      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">actual</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">name2</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="o">.</span><span class="n">query</span><span class="p">,</span> <span class="n">actual</span><span class="o">.</span><span class="n">query</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">prompt_output_expected</span><span class="p">,</span> <span class="n">prompt_output_actual</span><span class="p">)</span></div>

<div class="viewcode-block" id="SQLiteControllerTest.testCreateSQLQueryModelWithUserInputWithExamplesAndNoDataFromQuery"><a class="viewcode-back" href="../../../../tests.frontend.controller.html#tests.frontend.controller.test_sqlite_controller.SQLiteControllerTest.testCreateSQLQueryModelWithUserInputWithExamplesAndNoDataFromQuery">[docs]</a>  <span class="k">def</span> <span class="nf">testCreateSQLQueryModelWithUserInputWithExamplesAndNoDataFromQuery</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;test method CreateEventModelWithUserInput with examples&quot;&quot;&quot;</span>

    <span class="n">fake_execution</span> <span class="o">=</span> <span class="n">fake_sqlite_query_execution</span><span class="o">.</span><span class="n">SQLQueryExecution</span><span class="p">(</span>
        <span class="n">sql_query_data</span><span class="o">.</span><span class="n">SQLQueryData</span><span class="p">(</span><span class="n">has_error</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">[])</span>
    <span class="p">)</span>
    <span class="n">sql_query</span> <span class="o">=</span> <span class="s1">&#39;SELECT id from Users&#39;</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Contact&#39;</span>
    <span class="k">with</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">TemporaryDirectory</span><span class="p">()</span> <span class="k">as</span> <span class="n">tmpdir</span><span class="p">:</span>
      <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">,</span> <span class="s1">&#39;testfile&#39;</span><span class="p">)</span>
      <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="o">.</span><span class="n">touch</span><span class="p">()</span>

      <span class="n">output_handler</span> <span class="o">=</span> <span class="n">output_handler_file</span><span class="o">.</span><span class="n">OutputHandlerFile</span><span class="p">(</span>
          <span class="n">path</span><span class="p">,</span> <span class="n">file_handler</span><span class="o">.</span><span class="n">FileHandler</span><span class="p">(),</span>
          <span class="n">confirm</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">confirm_amount_same</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">prompt_info</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
      <span class="n">plugin_helper</span> <span class="o">=</span> <span class="n">fake_sqlite_plugin_helper</span><span class="o">.</span><span class="n">FakeSQLitePluginHelper</span><span class="p">(</span>
          <span class="n">folder_exists</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
      <span class="n">controller</span> <span class="o">=</span> <span class="n">sqlite_controller</span><span class="o">.</span><span class="n">SQLiteController</span><span class="p">(</span><span class="n">output_handler</span><span class="p">,</span>
                                                      <span class="n">plugin_helper</span><span class="p">)</span>
      <span class="n">controller</span><span class="o">.</span><span class="n">GetTimestamps</span> <span class="o">=</span> <span class="n">mock</span><span class="o">.</span><span class="n">MagicMock</span><span class="p">(</span><span class="n">return_value</span><span class="o">=</span><span class="p">([],</span> <span class="p">[]))</span>
      <span class="n">actual</span> <span class="o">=</span> <span class="n">controller</span><span class="o">.</span><span class="n">_CreateSQLQueryModelWithUserInput</span><span class="p">(</span><span class="n">sql_query</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span>
                                                            <span class="n">fake_execution</span><span class="p">)</span>
      <span class="n">prompt_output_actual</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ReadFromFile</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
      <span class="n">prompt_output_expected</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;Your query does not return anything.&#39;</span>
                                <span class="s1">&#39;Do you want to add this query?&#39;</span>
                                <span class="s1">&#39;Do you want to name the query parse row:  ?&#39;</span>
                                <span class="s1">&#39;Does the event  need customizing?&#39;</span><span class="p">)</span>

      <span class="n">expected</span> <span class="o">=</span> <span class="n">sql_query_model</span><span class="o">.</span><span class="n">SQLQueryModel</span><span class="p">(</span><span class="n">sql_query</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="p">[],</span> <span class="p">[],</span> <span class="kc">False</span><span class="p">,</span>
                                               <span class="mi">0</span><span class="p">)</span>

      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">actual</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="o">.</span><span class="n">query</span><span class="p">,</span> <span class="n">actual</span><span class="o">.</span><span class="n">query</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">prompt_output_expected</span><span class="p">,</span> <span class="n">prompt_output_actual</span><span class="p">)</span></div>

<div class="viewcode-block" id="SQLiteControllerTest.testCreateSQLQueryModelWithUserInputWithError"><a class="viewcode-back" href="../../../../tests.frontend.controller.html#tests.frontend.controller.test_sqlite_controller.SQLiteControllerTest.testCreateSQLQueryModelWithUserInputWithError">[docs]</a>  <span class="k">def</span> <span class="nf">testCreateSQLQueryModelWithUserInputWithError</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;test method CreateEventModelWithUserInput&quot;&quot;&quot;</span>
    <span class="n">error_message</span> <span class="o">=</span> <span class="s2">&quot;Some Error...&quot;</span>
    <span class="n">fake_execution</span> <span class="o">=</span> <span class="n">fake_sqlite_query_execution</span><span class="o">.</span><span class="n">SQLQueryExecution</span><span class="p">(</span>
        <span class="n">sql_query_data</span><span class="o">.</span><span class="n">SQLQueryData</span><span class="p">(</span><span class="n">has_error</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                    <span class="n">error_message</span><span class="o">=</span><span class="n">error_message</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">sql_query</span> <span class="o">=</span> <span class="s1">&#39;SELECT createdDate FROM Users ORDER BY createdDate&#39;</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Contact&#39;</span>
    <span class="k">with</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">TemporaryDirectory</span><span class="p">()</span> <span class="k">as</span> <span class="n">tmpdir</span><span class="p">:</span>
      <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">,</span> <span class="s1">&#39;testfile&#39;</span><span class="p">)</span>
      <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="o">.</span><span class="n">touch</span><span class="p">()</span>

      <span class="n">output_handler</span> <span class="o">=</span> <span class="n">output_handler_file</span><span class="o">.</span><span class="n">OutputHandlerFile</span><span class="p">(</span>
          <span class="n">path</span><span class="p">,</span> <span class="n">file_handler</span><span class="o">.</span><span class="n">FileHandler</span><span class="p">(),</span> <span class="n">prompt_info</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
      <span class="n">plugin_helper</span> <span class="o">=</span> <span class="n">fake_sqlite_plugin_helper</span><span class="o">.</span><span class="n">FakeSQLitePluginHelper</span><span class="p">(</span>
          <span class="n">folder_exists</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
      <span class="n">controller</span> <span class="o">=</span> <span class="n">sqlite_controller</span><span class="o">.</span><span class="n">SQLiteController</span><span class="p">(</span><span class="n">output_handler</span><span class="p">,</span>
                                                      <span class="n">plugin_helper</span><span class="p">)</span>
      <span class="n">actual</span> <span class="o">=</span> <span class="n">controller</span><span class="o">.</span><span class="n">_CreateSQLQueryModelWithUserInput</span><span class="p">(</span><span class="n">sql_query</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span>
                                                            <span class="n">fake_execution</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">actual</span><span class="p">)</span></div>

<div class="viewcode-block" id="SQLiteControllerTest.testSqlQuery"><a class="viewcode-back" href="../../../../tests.frontend.controller.html#tests.frontend.controller.test_sqlite_controller.SQLiteControllerTest.testSqlQuery">[docs]</a>  <span class="k">def</span> <span class="nf">testSqlQuery</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;test method after getting the source path from the user&quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">TemporaryDirectory</span><span class="p">()</span> <span class="k">as</span> <span class="n">tmpdir</span><span class="p">:</span>
      <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">,</span> <span class="s1">&#39;testfile&#39;</span><span class="p">)</span>
      <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="o">.</span><span class="n">touch</span><span class="p">()</span>

      <span class="n">output_handler</span> <span class="o">=</span> <span class="n">output_handler_file</span><span class="o">.</span><span class="n">OutputHandlerFile</span><span class="p">(</span>
          <span class="n">path</span><span class="p">,</span> <span class="n">file_handler</span><span class="o">.</span><span class="n">FileHandler</span><span class="p">(),</span> <span class="n">confirm</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
      <span class="n">plugin_helper</span> <span class="o">=</span> <span class="n">fake_sqlite_plugin_helper</span><span class="o">.</span><span class="n">FakeSQLitePluginHelper</span><span class="p">()</span>
      <span class="n">controller</span> <span class="o">=</span> <span class="n">sqlite_controller</span><span class="o">.</span><span class="n">SQLiteController</span><span class="p">(</span><span class="n">output_handler</span><span class="p">,</span>
                                                      <span class="n">plugin_helper</span><span class="p">)</span>

      <span class="n">controller</span><span class="o">.</span><span class="n">_CreateSQLQueryModelWithUserInput</span> <span class="o">=</span> <span class="n">mock</span><span class="o">.</span><span class="n">MagicMock</span><span class="p">(</span>
          <span class="n">return_value</span><span class="o">=</span><span class="n">sql_query_data</span><span class="o">.</span><span class="n">SQLQueryData</span><span class="p">(</span>
              <span class="n">data</span><span class="o">=</span><span class="s1">&#39;test&#39;</span><span class="p">,</span> <span class="n">has_error</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">error_message</span><span class="o">=</span><span class="kc">None</span><span class="p">))</span>

      <span class="n">actual</span> <span class="o">=</span> <span class="n">controller</span><span class="o">.</span><span class="n">SQLQuery</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>

      <span class="n">prompt_output_actual</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ReadFromFile</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

      <span class="n">prompt_output_expected</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;Please write your SQL script for the plugin&#39;</span>
                                <span class="s1">&#39;Do you want to add another Query?&#39;</span><span class="p">)</span>

      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">actual</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">actual</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;test&#39;</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">actual</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">has_error</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">actual</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">error_message</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">prompt_output_actual</span><span class="p">,</span> <span class="n">prompt_output_expected</span><span class="p">)</span></div>

<div class="viewcode-block" id="SQLiteControllerTest.testSqlQueryWithAbort"><a class="viewcode-back" href="../../../../tests.frontend.controller.html#tests.frontend.controller.test_sqlite_controller.SQLiteControllerTest.testSqlQueryWithAbort">[docs]</a>  <span class="k">def</span> <span class="nf">testSqlQueryWithAbort</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;test method after getting the source path from the user using abort&quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">TemporaryDirectory</span><span class="p">()</span> <span class="k">as</span> <span class="n">tmpdir</span><span class="p">:</span>
      <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">,</span> <span class="s1">&#39;testfile&#39;</span><span class="p">)</span>
      <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="o">.</span><span class="n">touch</span><span class="p">()</span>

      <span class="n">output_handler</span> <span class="o">=</span> <span class="n">output_handler_file</span><span class="o">.</span><span class="n">OutputHandlerFile</span><span class="p">(</span>
          <span class="n">path</span><span class="p">,</span> <span class="n">file_handler</span><span class="o">.</span><span class="n">FileHandler</span><span class="p">(),</span> <span class="n">prompt_info</span><span class="o">=</span><span class="s1">&#39;abort&#39;</span><span class="p">,</span> <span class="n">confirm</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
          <span class="n">confirm_amount_same</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
      <span class="n">plugin_helper</span> <span class="o">=</span> <span class="n">fake_sqlite_plugin_helper</span><span class="o">.</span><span class="n">FakeSQLitePluginHelper</span><span class="p">()</span>
      <span class="n">controller</span> <span class="o">=</span> <span class="n">sqlite_controller</span><span class="o">.</span><span class="n">SQLiteController</span><span class="p">(</span><span class="n">output_handler</span><span class="p">,</span>
                                                      <span class="n">plugin_helper</span><span class="p">)</span>

      <span class="n">controller</span><span class="o">.</span><span class="n">_CreateSQLQueryModelWithUserInput</span> <span class="o">=</span> <span class="n">mock</span><span class="o">.</span><span class="n">MagicMock</span><span class="p">(</span>
          <span class="n">return_value</span><span class="o">=</span><span class="n">sql_query_model</span><span class="o">.</span><span class="n">SQLQueryModel</span><span class="p">(</span>
              <span class="s1">&#39;query&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>

      <span class="n">actual</span> <span class="o">=</span> <span class="n">controller</span><span class="o">.</span><span class="n">SQLQuery</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>

      <span class="n">prompt_output_actual</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ReadFromFile</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
      <span class="n">prompt_output_expected</span> <span class="o">=</span> <span class="p">(</span>
          <span class="s1">&#39;Please write your SQL script for the plugin&#39;</span>
          <span class="s1">&#39;Do you want to add another Query?&#39;</span>
          <span class="s1">&#39;Please write your SQL script for the plugin [</span><span class="se">\&#39;</span><span class="s1">abort</span><span class="se">\&#39;</span><span class="s1"> to continue]&#39;</span><span class="p">)</span>

      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">actual</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">actual</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">query</span><span class="p">,</span> <span class="s1">&#39;query&#39;</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">prompt_output_actual</span><span class="p">,</span> <span class="n">prompt_output_expected</span><span class="p">)</span></div>

<div class="viewcode-block" id="SQLiteControllerTest.testSqlQueryMultiple"><a class="viewcode-back" href="../../../../tests.frontend.controller.html#tests.frontend.controller.test_sqlite_controller.SQLiteControllerTest.testSqlQueryMultiple">[docs]</a>  <span class="k">def</span> <span class="nf">testSqlQueryMultiple</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;test method after getting the source path from the user&quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">TemporaryDirectory</span><span class="p">()</span> <span class="k">as</span> <span class="n">tmpdir</span><span class="p">:</span>
      <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">,</span> <span class="s1">&#39;testfile&#39;</span><span class="p">)</span>
      <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="o">.</span><span class="n">touch</span><span class="p">()</span>

      <span class="n">output_handler</span> <span class="o">=</span> <span class="n">output_handler_file</span><span class="o">.</span><span class="n">OutputHandlerFile</span><span class="p">(</span>
          <span class="n">path</span><span class="p">,</span> <span class="n">file_handler</span><span class="o">.</span><span class="n">FileHandler</span><span class="p">(),</span> <span class="n">confirm</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">confirm_amount_same</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
      <span class="n">plugin_helper</span> <span class="o">=</span> <span class="n">fake_sqlite_plugin_helper</span><span class="o">.</span><span class="n">FakeSQLitePluginHelper</span><span class="p">()</span>
      <span class="n">controller</span> <span class="o">=</span> <span class="n">sqlite_controller</span><span class="o">.</span><span class="n">SQLiteController</span><span class="p">(</span><span class="n">output_handler</span><span class="p">,</span>
                                                      <span class="n">plugin_helper</span><span class="p">)</span>

      <span class="n">controller</span><span class="o">.</span><span class="n">_CreateSQLQueryModelWithUserInput</span> <span class="o">=</span> <span class="n">mock</span><span class="o">.</span><span class="n">MagicMock</span><span class="p">(</span>
          <span class="n">return_value</span><span class="o">=</span><span class="n">sql_query_data</span><span class="o">.</span><span class="n">SQLQueryData</span><span class="p">(</span>
              <span class="n">data</span><span class="o">=</span><span class="s1">&#39;test&#39;</span><span class="p">,</span> <span class="n">has_error</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">error_message</span><span class="o">=</span><span class="kc">None</span><span class="p">))</span>

      <span class="n">actual</span> <span class="o">=</span> <span class="n">controller</span><span class="o">.</span><span class="n">SQLQuery</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>

      <span class="n">prompt_output_expected</span> <span class="o">=</span> <span class="p">(</span>
          <span class="s1">&#39;Please write your SQL script for the plugin&#39;</span>
          <span class="s1">&#39;Do you want to add another Query?&#39;</span>
          <span class="s1">&#39;Please write your SQL script for the plugin [</span><span class="se">\&#39;</span><span class="s1">abort</span><span class="se">\&#39;</span><span class="s1"> to continue]&#39;</span>
          <span class="s1">&#39;Do you want to add another Query?&#39;</span>
          <span class="s1">&#39;Please write your SQL script for the plugin [</span><span class="se">\&#39;</span><span class="s1">abort</span><span class="se">\&#39;</span><span class="s1"> to continue]&#39;</span>
          <span class="s1">&#39;Do you want to add another Query?&#39;</span>
      <span class="p">)</span>
      <span class="n">prompt_output_actual</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ReadFromFile</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">actual</span><span class="p">),</span> <span class="mi">3</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">actual</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;test&#39;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">actual</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">has_error</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">actual</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">error_message</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">actual</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;test&#39;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">actual</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">has_error</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">actual</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">error_message</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">actual</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;test&#39;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">actual</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">has_error</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">actual</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">error_message</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">prompt_output_actual</span><span class="p">,</span> <span class="n">prompt_output_expected</span><span class="p">)</span></div>

<div class="viewcode-block" id="SQLiteControllerTest.testSourcePathIfNotExisting"><a class="viewcode-back" href="../../../../tests.frontend.controller.html#tests.frontend.controller.test_sqlite_controller.SQLiteControllerTest.testSourcePathIfNotExisting">[docs]</a>  <span class="k">def</span> <span class="nf">testSourcePathIfNotExisting</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;test method after getting the source path from the user&quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">TemporaryDirectory</span><span class="p">()</span> <span class="k">as</span> <span class="n">tmpdir</span><span class="p">:</span>
      <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">,</span> <span class="s1">&#39;testfile&#39;</span><span class="p">)</span>
      <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="o">.</span><span class="n">touch</span><span class="p">()</span>

      <span class="n">output_handler</span> <span class="o">=</span> <span class="n">output_handler_file</span><span class="o">.</span><span class="n">OutputHandlerFile</span><span class="p">(</span>
          <span class="n">path</span><span class="p">,</span> <span class="n">file_handler</span><span class="o">.</span><span class="n">FileHandler</span><span class="p">(),</span> <span class="n">prompt_error</span><span class="o">=</span><span class="s1">&#39;the source path&#39;</span><span class="p">)</span>
      <span class="n">plugin_helper</span> <span class="o">=</span> <span class="n">fake_sqlite_plugin_helper</span><span class="o">.</span><span class="n">FakeSQLitePluginHelper</span><span class="p">(</span>
          <span class="n">folder_exists</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">change_bool_after_every_call_folder_exists</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
      <span class="n">controller</span> <span class="o">=</span> <span class="n">sqlite_controller</span><span class="o">.</span><span class="n">SQLiteController</span><span class="p">(</span><span class="n">output_handler</span><span class="p">,</span>
                                                      <span class="n">plugin_helper</span><span class="p">)</span>
      <span class="n">actualPath</span> <span class="o">=</span> <span class="s1">&#39;testpath&#39;</span>
      <span class="n">source_path</span> <span class="o">=</span> <span class="n">controller</span><span class="o">.</span><span class="n">SourcePath</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">actualPath</span><span class="p">)</span>
      <span class="n">expected</span> <span class="o">=</span> <span class="s1">&#39;Folder does not exists. Enter correct one&#39;</span>
      <span class="n">actual</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ReadFromFile</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">actual</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">source_path</span><span class="p">,</span> <span class="s1">&#39;the source path&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="SQLiteControllerTest.testTestPathIfExisting"><a class="viewcode-back" href="../../../../tests.frontend.controller.html#tests.frontend.controller.test_sqlite_controller.SQLiteControllerTest.testTestPathIfExisting">[docs]</a>  <span class="k">def</span> <span class="nf">testTestPathIfExisting</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;test method after getting the source path from the user&quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">TemporaryDirectory</span><span class="p">()</span> <span class="k">as</span> <span class="n">tmpdir</span><span class="p">:</span>
      <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">,</span> <span class="s1">&#39;testfile&#39;</span><span class="p">)</span>
      <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="o">.</span><span class="n">touch</span><span class="p">()</span>

      <span class="n">output_handler</span> <span class="o">=</span> <span class="n">output_handler_file</span><span class="o">.</span><span class="n">OutputHandlerFile</span><span class="p">(</span>
          <span class="n">path</span><span class="p">,</span> <span class="n">file_handler</span><span class="o">.</span><span class="n">FileHandler</span><span class="p">())</span>
      <span class="n">plugin_helper</span> <span class="o">=</span> <span class="n">fake_sqlite_plugin_helper</span><span class="o">.</span><span class="n">FakeSQLitePluginHelper</span><span class="p">(</span>
          <span class="n">file_exists</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
      <span class="n">controller</span> <span class="o">=</span> <span class="n">sqlite_controller</span><span class="o">.</span><span class="n">SQLiteController</span><span class="p">(</span><span class="n">output_handler</span><span class="p">,</span>
                                                      <span class="n">plugin_helper</span><span class="p">)</span>
      <span class="n">actualPath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path_helper</span><span class="o">.</span><span class="n">TestDatabasePath</span><span class="p">(),</span>
                                <span class="s1">&#39;twitter_ios.db&#39;</span><span class="p">)</span>
      <span class="n">valid_path</span> <span class="o">=</span> <span class="n">controller</span><span class="o">.</span><span class="n">TestPath</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">actualPath</span><span class="p">)</span>

      <span class="n">actual_output</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ReadFromFile</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">actualPath</span><span class="p">,</span> <span class="n">controller</span><span class="o">.</span><span class="n">_testfile</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">actual_output</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">valid_path</span><span class="p">,</span> <span class="n">actualPath</span><span class="p">)</span></div>

<div class="viewcode-block" id="SQLiteControllerTest.testTestPathIfExistingAndNoDatabaseFile"><a class="viewcode-back" href="../../../../tests.frontend.controller.html#tests.frontend.controller.test_sqlite_controller.SQLiteControllerTest.testTestPathIfExistingAndNoDatabaseFile">[docs]</a>  <span class="k">def</span> <span class="nf">testTestPathIfExistingAndNoDatabaseFile</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;test method after getting the source path from the user&quot;&quot;&quot;</span>

    <span class="k">with</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">TemporaryDirectory</span><span class="p">()</span> <span class="k">as</span> <span class="n">tmpdir</span><span class="p">:</span>
      <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">,</span> <span class="s1">&#39;testfile&#39;</span><span class="p">)</span>
      <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="o">.</span><span class="n">touch</span><span class="p">()</span>

      <span class="n">error_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path_helper</span><span class="o">.</span><span class="n">TestDatabasePath</span><span class="p">(),</span>
                                <span class="s1">&#39;twitter_ios_error.db&#39;</span><span class="p">)</span>
      <span class="n">correct_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path_helper</span><span class="o">.</span><span class="n">TestDatabasePath</span><span class="p">(),</span>
                                  <span class="s1">&#39;twitter_ios.db&#39;</span><span class="p">)</span>

      <span class="n">output_handler</span> <span class="o">=</span> <span class="n">output_handler_file</span><span class="o">.</span><span class="n">OutputHandlerFile</span><span class="p">(</span>
          <span class="n">path</span><span class="p">,</span> <span class="n">file_handler</span><span class="o">.</span><span class="n">FileHandler</span><span class="p">(),</span> <span class="n">prompt_error</span><span class="o">=</span><span class="n">correct_file</span><span class="p">)</span>
      <span class="n">plugin_helper</span> <span class="o">=</span> <span class="n">fake_sqlite_plugin_helper</span><span class="o">.</span><span class="n">FakeSQLitePluginHelper</span><span class="p">(</span>
          <span class="n">file_exists</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
      <span class="n">controller</span> <span class="o">=</span> <span class="n">sqlite_controller</span><span class="o">.</span><span class="n">SQLiteController</span><span class="p">(</span><span class="n">output_handler</span><span class="p">,</span>
                                                      <span class="n">plugin_helper</span><span class="p">)</span>

      <span class="n">valid_path</span> <span class="o">=</span> <span class="n">controller</span><span class="o">.</span><span class="n">TestPath</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">error_file</span><span class="p">)</span>

      <span class="n">actual_output</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ReadFromFile</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
      <span class="n">expected_output</span> <span class="o">=</span> <span class="s1">&#39;Unable to open the database file. Choose another.&#39;</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">correct_file</span><span class="p">,</span> <span class="n">controller</span><span class="o">.</span><span class="n">_testfile</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected_output</span><span class="p">,</span> <span class="n">actual_output</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">valid_path</span><span class="p">,</span> <span class="n">correct_file</span><span class="p">)</span></div>

<div class="viewcode-block" id="SQLiteControllerTest.testTestPathIfNotExisting"><a class="viewcode-back" href="../../../../tests.frontend.controller.html#tests.frontend.controller.test_sqlite_controller.SQLiteControllerTest.testTestPathIfNotExisting">[docs]</a>  <span class="k">def</span> <span class="nf">testTestPathIfNotExisting</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;test method after getting the source path from the user&quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">TemporaryDirectory</span><span class="p">()</span> <span class="k">as</span> <span class="n">tmpdir</span><span class="p">:</span>
      <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">,</span> <span class="s1">&#39;testfile&#39;</span><span class="p">)</span>
      <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="o">.</span><span class="n">touch</span><span class="p">()</span>
      <span class="n">wrongPath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">,</span> <span class="s1">&#39;testpath&#39;</span><span class="p">)</span>
      <span class="n">validPath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">,</span> <span class="s1">&#39;testpathvalid&#39;</span><span class="p">)</span>

      <span class="n">output_handler</span> <span class="o">=</span> <span class="n">output_handler_file</span><span class="o">.</span><span class="n">OutputHandlerFile</span><span class="p">(</span>
          <span class="n">path</span><span class="p">,</span> <span class="n">file_handler</span><span class="o">.</span><span class="n">FileHandler</span><span class="p">(),</span> <span class="n">prompt_error</span><span class="o">=</span><span class="n">validPath</span><span class="p">)</span>
      <span class="n">plugin_helper</span> <span class="o">=</span> <span class="n">fake_sqlite_plugin_helper</span><span class="o">.</span><span class="n">FakeSQLitePluginHelper</span><span class="p">(</span>
          <span class="n">file_exists</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">change_bool_after_every_call_file_exists</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
      <span class="n">controller</span> <span class="o">=</span> <span class="n">sqlite_controller</span><span class="o">.</span><span class="n">SQLiteController</span><span class="p">(</span><span class="n">output_handler</span><span class="p">,</span>
                                                      <span class="n">plugin_helper</span><span class="p">)</span>
      <span class="n">actual_path</span> <span class="o">=</span> <span class="n">controller</span><span class="o">.</span><span class="n">TestPath</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">wrongPath</span><span class="p">)</span>
      <span class="n">expected</span> <span class="o">=</span> <span class="s1">&#39;File does not exists. Choose another.&#39;</span>
      <span class="n">actual</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ReadFromFile</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">actual</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">validPath</span><span class="p">,</span> <span class="n">actual_path</span><span class="p">)</span>
      <span class="c1"># close connection so the temp file can be deleted before the program</span>
      <span class="c1">#   circle is finished</span>
      <span class="n">controller</span><span class="o">.</span><span class="n">_query_execution</span><span class="o">.</span><span class="n">_connection</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>

<div class="viewcode-block" id="SQLiteControllerTest.testValidatePluginNameIfOk"><a class="viewcode-back" href="../../../../tests.frontend.controller.html#tests.frontend.controller.test_sqlite_controller.SQLiteControllerTest.testValidatePluginNameIfOk">[docs]</a>  <span class="k">def</span> <span class="nf">testValidatePluginNameIfOk</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;test the validate plugin Name method if ok&quot;&quot;&quot;</span>
    <span class="n">plugin_helper</span> <span class="o">=</span> <span class="n">fake_sqlite_plugin_helper</span><span class="o">.</span><span class="n">FakeSQLitePluginHelper</span><span class="p">(</span>
        <span class="n">valid_name</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">controller</span> <span class="o">=</span> <span class="n">sqlite_controller</span><span class="o">.</span><span class="n">SQLiteController</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">plugin_helper</span><span class="p">)</span>
    <span class="n">valid_plugin</span> <span class="o">=</span> <span class="n">controller</span><span class="o">.</span><span class="n">_ValidatePluginName</span><span class="p">(</span><span class="s2">&quot;the_plugin&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">valid_plugin</span><span class="p">)</span></div>

<div class="viewcode-block" id="SQLiteControllerTest.testValidatePluginNameIfNotOk"><a class="viewcode-back" href="../../../../tests.frontend.controller.html#tests.frontend.controller.test_sqlite_controller.SQLiteControllerTest.testValidatePluginNameIfNotOk">[docs]</a>  <span class="k">def</span> <span class="nf">testValidatePluginNameIfNotOk</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;test the validate plugin Name method if not ok&quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">TemporaryDirectory</span><span class="p">()</span> <span class="k">as</span> <span class="n">tmpdir</span><span class="p">:</span>
      <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">,</span> <span class="s1">&#39;testfile&#39;</span><span class="p">)</span>
      <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="o">.</span><span class="n">touch</span><span class="p">()</span>

      <span class="n">output_handler</span> <span class="o">=</span> <span class="n">output_handler_file</span><span class="o">.</span><span class="n">OutputHandlerFile</span><span class="p">(</span>
          <span class="n">path</span><span class="p">,</span> <span class="n">file_handler</span><span class="o">.</span><span class="n">FileHandler</span><span class="p">(),</span> <span class="n">prompt_error</span><span class="o">=</span><span class="s1">&#39;valid_name&#39;</span><span class="p">)</span>
      <span class="n">plugin_helper</span> <span class="o">=</span> <span class="n">fake_sqlite_plugin_helper</span><span class="o">.</span><span class="n">FakeSQLitePluginHelper</span><span class="p">(</span>
          <span class="n">valid_name</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">change_bool_after_every_call_valid_name</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
      <span class="n">controller</span> <span class="o">=</span> <span class="n">sqlite_controller</span><span class="o">.</span><span class="n">SQLiteController</span><span class="p">(</span><span class="n">output_handler</span><span class="p">,</span>
                                                      <span class="n">plugin_helper</span><span class="p">)</span>
      <span class="n">valid</span> <span class="o">=</span> <span class="n">controller</span><span class="o">.</span><span class="n">_ValidatePluginName</span><span class="p">(</span><span class="s2">&quot;the_wrong_plugin_&quot;</span><span class="p">)</span>
      <span class="n">expected</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;Plugin is not in a valid format. Choose new Name [&#39;</span>
                  <span class="s1">&#39;plugin_name_...]&#39;</span><span class="p">)</span>
      <span class="n">actual</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ReadFromFile</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">actual</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">valid</span><span class="p">,</span> <span class="s1">&#39;valid_name&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="SQLiteControllerTest.testValidateRowNameNameIfOk"><a class="viewcode-back" href="../../../../tests.frontend.controller.html#tests.frontend.controller.test_sqlite_controller.SQLiteControllerTest.testValidateRowNameNameIfOk">[docs]</a>  <span class="k">def</span> <span class="nf">testValidateRowNameNameIfOk</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;test the validate row name method if ok&quot;&quot;&quot;</span>
    <span class="n">plugin_helper</span> <span class="o">=</span> <span class="n">fake_sqlite_plugin_helper</span><span class="o">.</span><span class="n">FakeSQLitePluginHelper</span><span class="p">(</span>
        <span class="n">valid_name</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">controller</span> <span class="o">=</span> <span class="n">sqlite_controller</span><span class="o">.</span><span class="n">SQLiteController</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">plugin_helper</span><span class="p">)</span>
    <span class="n">valid</span> <span class="o">=</span> <span class="n">controller</span><span class="o">.</span><span class="n">_ValidateRowName</span><span class="p">(</span><span class="s2">&quot;TheRowName&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">valid</span><span class="p">,</span> <span class="s1">&#39;TheRowName&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="SQLiteControllerTest.testValidateRowNameIfNotOk"><a class="viewcode-back" href="../../../../tests.frontend.controller.html#tests.frontend.controller.test_sqlite_controller.SQLiteControllerTest.testValidateRowNameIfNotOk">[docs]</a>  <span class="k">def</span> <span class="nf">testValidateRowNameIfNotOk</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;test the validate row name method if not ok&quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">TemporaryDirectory</span><span class="p">()</span> <span class="k">as</span> <span class="n">tmpdir</span><span class="p">:</span>
      <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">,</span> <span class="s1">&#39;testfile&#39;</span><span class="p">)</span>
      <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="o">.</span><span class="n">touch</span><span class="p">()</span>

      <span class="n">output_handler</span> <span class="o">=</span> <span class="n">output_handler_file</span><span class="o">.</span><span class="n">OutputHandlerFile</span><span class="p">(</span>
          <span class="n">path</span><span class="p">,</span> <span class="n">file_handler</span><span class="o">.</span><span class="n">FileHandler</span><span class="p">(),</span> <span class="n">prompt_error</span><span class="o">=</span><span class="s1">&#39;TheValidRowName&#39;</span><span class="p">)</span>
      <span class="n">plugin_helper</span> <span class="o">=</span> <span class="n">fake_sqlite_plugin_helper</span><span class="o">.</span><span class="n">FakeSQLitePluginHelper</span><span class="p">(</span>
          <span class="n">valid_row_name</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
          <span class="n">change_bool_after_every_call_valid_row_name</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
      <span class="n">controller</span> <span class="o">=</span> <span class="n">sqlite_controller</span><span class="o">.</span><span class="n">SQLiteController</span><span class="p">(</span><span class="n">output_handler</span><span class="p">,</span>
                                                      <span class="n">plugin_helper</span><span class="p">)</span>
      <span class="n">valid</span> <span class="o">=</span> <span class="n">controller</span><span class="o">.</span><span class="n">_ValidateRowName</span><span class="p">(</span><span class="s2">&quot;theWrongName&quot;</span><span class="p">)</span>
      <span class="n">expected</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;Row name is not in a valid format. Choose new Name [&#39;</span>
                  <span class="s1">&#39;RowName...]&#39;</span><span class="p">)</span>
      <span class="n">actual</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ReadFromFile</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">actual</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">valid</span><span class="p">,</span> <span class="s1">&#39;TheValidRowName&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="SQLiteControllerTest.testValidateTimestampStringIfOk"><a class="viewcode-back" href="../../../../tests.frontend.controller.html#tests.frontend.controller.test_sqlite_controller.SQLiteControllerTest.testValidateTimestampStringIfOk">[docs]</a>  <span class="k">def</span> <span class="nf">testValidateTimestampStringIfOk</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;test the validate timestamp string method if ok&quot;&quot;&quot;</span>
    <span class="n">plugin_helper</span> <span class="o">=</span> <span class="n">fake_sqlite_plugin_helper</span><span class="o">.</span><span class="n">FakeSQLitePluginHelper</span><span class="p">(</span>
        <span class="n">valid_name</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">controller</span> <span class="o">=</span> <span class="n">sqlite_controller</span><span class="o">.</span><span class="n">SQLiteController</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">plugin_helper</span><span class="p">)</span>
    <span class="n">valid</span> <span class="o">=</span> <span class="n">controller</span><span class="o">.</span><span class="n">_ValidateTimestampString</span><span class="p">(</span><span class="s2">&quot;this,that,bla&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">valid</span><span class="p">,</span> <span class="s1">&#39;this,that,bla&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="SQLiteControllerTest.testValidateTimestampStringIfNotOk"><a class="viewcode-back" href="../../../../tests.frontend.controller.html#tests.frontend.controller.test_sqlite_controller.SQLiteControllerTest.testValidateTimestampStringIfNotOk">[docs]</a>  <span class="k">def</span> <span class="nf">testValidateTimestampStringIfNotOk</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;test the validate timestamp string method if not ok&quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">TemporaryDirectory</span><span class="p">()</span> <span class="k">as</span> <span class="n">tmpdir</span><span class="p">:</span>
      <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">,</span> <span class="s1">&#39;testfile&#39;</span><span class="p">)</span>
      <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="o">.</span><span class="n">touch</span><span class="p">()</span>

      <span class="n">output_handler</span> <span class="o">=</span> <span class="n">output_handler_file</span><span class="o">.</span><span class="n">OutputHandlerFile</span><span class="p">(</span>
          <span class="n">path</span><span class="p">,</span> <span class="n">file_handler</span><span class="o">.</span><span class="n">FileHandler</span><span class="p">(),</span> <span class="n">prompt_error</span><span class="o">=</span><span class="s1">&#39;this,that,bla&#39;</span><span class="p">)</span>
      <span class="n">plugin_helper</span> <span class="o">=</span> <span class="n">fake_sqlite_plugin_helper</span><span class="o">.</span><span class="n">FakeSQLitePluginHelper</span><span class="p">(</span>
          <span class="n">valid_comma_separated_string</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
          <span class="n">change_bool_after_every_call_valid_comma_separated_string</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
      <span class="n">controller</span> <span class="o">=</span> <span class="n">sqlite_controller</span><span class="o">.</span><span class="n">SQLiteController</span><span class="p">(</span><span class="n">output_handler</span><span class="p">,</span>
                                                      <span class="n">plugin_helper</span><span class="p">)</span>
      <span class="n">valid</span> <span class="o">=</span> <span class="n">controller</span><span class="o">.</span><span class="n">_ValidateTimestampString</span><span class="p">(</span><span class="s2">&quot;this, that,bla&quot;</span><span class="p">)</span>
      <span class="n">expected</span> <span class="o">=</span> <span class="p">(</span>
          <span class="s1">&#39;Timestamps are not in valid format. Reenter them correctly [name,&#39;</span>
          <span class="s1">&#39;name...]&#39;</span><span class="p">)</span>
      <span class="n">actual</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ReadFromFile</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">actual</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">valid</span><span class="p">,</span> <span class="s1">&#39;this,that,bla&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="SQLiteControllerTest.testValidateColumnStringIfOk"><a class="viewcode-back" href="../../../../tests.frontend.controller.html#tests.frontend.controller.test_sqlite_controller.SQLiteControllerTest.testValidateColumnStringIfOk">[docs]</a>  <span class="k">def</span> <span class="nf">testValidateColumnStringIfOk</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;test the validate column string method if ok&quot;&quot;&quot;</span>
    <span class="n">plugin_helper</span> <span class="o">=</span> <span class="n">fake_sqlite_plugin_helper</span><span class="o">.</span><span class="n">FakeSQLitePluginHelper</span><span class="p">(</span>
        <span class="n">valid_name</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">controller</span> <span class="o">=</span> <span class="n">sqlite_controller</span><span class="o">.</span><span class="n">SQLiteController</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">plugin_helper</span><span class="p">)</span>
    <span class="n">valid</span> <span class="o">=</span> <span class="n">controller</span><span class="o">.</span><span class="n">_ValidateColumnString</span><span class="p">(</span><span class="s2">&quot;this,that,bla&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">valid</span><span class="p">,</span> <span class="s1">&#39;this,that,bla&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="SQLiteControllerTest.testValidateColumnStringIfNotOk"><a class="viewcode-back" href="../../../../tests.frontend.controller.html#tests.frontend.controller.test_sqlite_controller.SQLiteControllerTest.testValidateColumnStringIfNotOk">[docs]</a>  <span class="k">def</span> <span class="nf">testValidateColumnStringIfNotOk</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;test the validate column string method if not ok&quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">TemporaryDirectory</span><span class="p">()</span> <span class="k">as</span> <span class="n">tmpdir</span><span class="p">:</span>
      <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">,</span> <span class="s1">&#39;testfile&#39;</span><span class="p">)</span>
      <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="o">.</span><span class="n">touch</span><span class="p">()</span>

      <span class="n">output_handler</span> <span class="o">=</span> <span class="n">output_handler_file</span><span class="o">.</span><span class="n">OutputHandlerFile</span><span class="p">(</span>
          <span class="n">path</span><span class="p">,</span> <span class="n">file_handler</span><span class="o">.</span><span class="n">FileHandler</span><span class="p">(),</span> <span class="n">prompt_error</span><span class="o">=</span><span class="s1">&#39;this,that,bla&#39;</span><span class="p">)</span>
      <span class="n">plugin_helper</span> <span class="o">=</span> <span class="n">fake_sqlite_plugin_helper</span><span class="o">.</span><span class="n">FakeSQLitePluginHelper</span><span class="p">(</span>
          <span class="n">valid_comma_separated_string</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
          <span class="n">change_bool_after_every_call_valid_comma_separated_string</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
      <span class="n">controller</span> <span class="o">=</span> <span class="n">sqlite_controller</span><span class="o">.</span><span class="n">SQLiteController</span><span class="p">(</span><span class="n">output_handler</span><span class="p">,</span>
                                                      <span class="n">plugin_helper</span><span class="p">)</span>
      <span class="n">valid</span> <span class="o">=</span> <span class="n">controller</span><span class="o">.</span><span class="n">_ValidateColumnString</span><span class="p">(</span><span class="s2">&quot;this, that,bla&quot;</span><span class="p">)</span>
      <span class="n">expected</span> <span class="o">=</span> <span class="p">(</span>
          <span class="s1">&#39;Column names are not in valid format. Reenter them correctly [name,&#39;</span>
          <span class="s1">&#39;name...]&#39;</span><span class="p">)</span>
      <span class="n">actual</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ReadFromFile</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">actual</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">valid</span><span class="p">,</span> <span class="s1">&#39;this,that,bla&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="SQLiteControllerTest.testCreateSQLQueryModelWithUserInput"><a class="viewcode-back" href="../../../../tests.frontend.controller.html#tests.frontend.controller.test_sqlite_controller.SQLiteControllerTest.testCreateSQLQueryModelWithUserInput">[docs]</a>  <span class="k">def</span> <span class="nf">testCreateSQLQueryModelWithUserInput</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;test the creation of the sql Query model with the user input&quot;&quot;&quot;</span>
    <span class="n">query</span> <span class="o">=</span> <span class="s2">&quot;select x &quot;</span>
    <span class="n">with_examples</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">query_execution</span> <span class="o">=</span> <span class="n">fake_sqlite_query_execution</span><span class="o">.</span><span class="n">SQLQueryExecution</span><span class="p">(</span>
        <span class="n">sql_query_data</span><span class="o">.</span><span class="n">SQLQueryData</span><span class="p">(</span>
            <span class="n">data</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;first&#39;</span><span class="p">,</span> <span class="s1">&#39;second&#39;</span><span class="p">,</span> <span class="s1">&#39;third&#39;</span><span class="p">,</span> <span class="s1">&#39;fourth&#39;</span><span class="p">],</span>
            <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="n">sql_query_column_model</span><span class="o">.</span><span class="n">SQLColumnModel</span><span class="p">(</span><span class="s1">&#39;that&#39;</span><span class="p">)]))</span>

    <span class="k">with</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">TemporaryDirectory</span><span class="p">()</span> <span class="k">as</span> <span class="n">tmpdir</span><span class="p">:</span>
      <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">,</span> <span class="s1">&#39;testfile&#39;</span><span class="p">)</span>
      <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="o">.</span><span class="n">touch</span><span class="p">()</span>

      <span class="n">output_handler</span> <span class="o">=</span> <span class="n">output_handler_file</span><span class="o">.</span><span class="n">OutputHandlerFile</span><span class="p">(</span>
          <span class="n">path</span><span class="p">,</span> <span class="n">file_handler</span><span class="o">.</span><span class="n">FileHandler</span><span class="p">(),</span> <span class="n">confirm_amount_same</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
          <span class="n">prompt_info</span><span class="o">=</span><span class="s1">&#39;that,other&#39;</span><span class="p">)</span>
      <span class="n">plugin_helper</span> <span class="o">=</span> <span class="n">fake_sqlite_plugin_helper</span><span class="o">.</span><span class="n">FakeSQLitePluginHelper</span><span class="p">(</span>
          <span class="n">assumed_timestamps</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;test&#39;</span><span class="p">],</span>
      <span class="p">)</span>
      <span class="n">controller</span> <span class="o">=</span> <span class="n">sqlite_controller</span><span class="o">.</span><span class="n">SQLiteController</span><span class="p">(</span><span class="n">output_handler</span><span class="p">,</span>
                                                      <span class="n">plugin_helper</span><span class="p">)</span>
      <span class="n">model</span> <span class="o">=</span> <span class="n">controller</span><span class="o">.</span><span class="n">_CreateSQLQueryModelWithUserInput</span><span class="p">(</span>
          <span class="n">query</span><span class="p">,</span> <span class="n">with_examples</span><span class="p">,</span> <span class="n">query_execution</span>
      <span class="p">)</span>
      <span class="n">expected</span> <span class="o">=</span> <span class="p">(</span>
          <span class="s1">&#39;Your query output could look like this.&#39;</span>
          <span class="s1">&#39;[</span><span class="se">\&#39;</span><span class="s1">that</span><span class="se">\&#39;</span><span class="s1">]&#39;</span>
          <span class="s1">&#39;first&#39;</span>
          <span class="s1">&#39;second&#39;</span>
          <span class="s1">&#39;third&#39;</span>
          <span class="s1">&#39;Do you want to add this query?&#39;</span>
          <span class="s1">&#39;Do you want to name the query parse row:  ?&#39;</span>
          <span class="s1">&#39;Is the column a time event? test&#39;</span>
          <span class="s1">&#39;Enter (additional) timestamp events from the query [columnName,&#39;</span>
          <span class="s1">&#39;aliasName...] or [abort]&#39;</span>
          <span class="s1">&#39;At least one timestamp is required, please add a timestamp&#39;</span>
          <span class="s1">&#39;Added: that&#39;</span>
          <span class="s1">&#39;Failed: other&#39;</span>
          <span class="s1">&#39;Do you want to add more timestamps?&#39;</span>
          <span class="s1">&#39;Does the event  need customizing?&#39;</span><span class="p">)</span>

      <span class="n">actual</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ReadFromFile</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">actual</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">needs_customizing</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">query</span><span class="p">,</span> <span class="n">query</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">columns</span><span class="p">,</span> <span class="p">[])</span></div>

<div class="viewcode-block" id="SQLiteControllerTest.testCreateSQLQueryModelWithUserInputNotAdding"><a class="viewcode-back" href="../../../../tests.frontend.controller.html#tests.frontend.controller.test_sqlite_controller.SQLiteControllerTest.testCreateSQLQueryModelWithUserInputNotAdding">[docs]</a>  <span class="k">def</span> <span class="nf">testCreateSQLQueryModelWithUserInputNotAdding</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;test the creation of the sql Query model with the user input&quot;&quot;&quot;</span>
    <span class="n">query</span> <span class="o">=</span> <span class="s2">&quot;select x&quot;</span>
    <span class="n">with_examples</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">query_execution</span> <span class="o">=</span> <span class="n">fake_sqlite_query_execution</span><span class="o">.</span><span class="n">SQLQueryExecution</span><span class="p">(</span>
        <span class="n">sql_query_data</span><span class="o">.</span><span class="n">SQLQueryData</span><span class="p">(</span>
            <span class="n">data</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;first&#39;</span><span class="p">,</span> <span class="s1">&#39;second&#39;</span><span class="p">,</span> <span class="s1">&#39;third&#39;</span><span class="p">],</span> <span class="n">columns</span><span class="o">=</span><span class="p">[]))</span>

    <span class="k">with</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">TemporaryDirectory</span><span class="p">()</span> <span class="k">as</span> <span class="n">tmpdir</span><span class="p">:</span>
      <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">,</span> <span class="s1">&#39;testfile&#39;</span><span class="p">)</span>
      <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="o">.</span><span class="n">touch</span><span class="p">()</span>

      <span class="n">output_handler</span> <span class="o">=</span> <span class="n">output_handler_file</span><span class="o">.</span><span class="n">OutputHandlerFile</span><span class="p">(</span>
          <span class="n">path</span><span class="p">,</span> <span class="n">file_handler</span><span class="o">.</span><span class="n">FileHandler</span><span class="p">(),</span> <span class="n">confirm</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
      <span class="n">plugin_helper</span> <span class="o">=</span> <span class="n">fake_sqlite_plugin_helper</span><span class="o">.</span><span class="n">FakeSQLitePluginHelper</span><span class="p">()</span>
      <span class="n">controller</span> <span class="o">=</span> <span class="n">sqlite_controller</span><span class="o">.</span><span class="n">SQLiteController</span><span class="p">(</span><span class="n">output_handler</span><span class="p">,</span>
                                                      <span class="n">plugin_helper</span><span class="p">)</span>
      <span class="n">model</span> <span class="o">=</span> <span class="n">controller</span><span class="o">.</span><span class="n">_CreateSQLQueryModelWithUserInput</span><span class="p">(</span>
          <span class="n">query</span><span class="p">,</span> <span class="n">with_examples</span><span class="p">,</span> <span class="n">query_execution</span>
      <span class="p">)</span>
      <span class="n">expected</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;Your query output could look like this.&#39;</span>
                  <span class="s1">&#39;[]&#39;</span>
                  <span class="s1">&#39;first&#39;</span>
                  <span class="s1">&#39;second&#39;</span>
                  <span class="s1">&#39;third&#39;</span>
                  <span class="s1">&#39;Do you want to add this query?&#39;</span><span class="p">)</span>

      <span class="n">actual</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ReadFromFile</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">actual</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">model</span><span class="p">)</span></div>

<div class="viewcode-block" id="SQLiteControllerTest.testGenerateIfConfirmed"><a class="viewcode-back" href="../../../../tests.frontend.controller.html#tests.frontend.controller.test_sqlite_controller.SQLiteControllerTest.testGenerateIfConfirmed">[docs]</a>  <span class="k">def</span> <span class="nf">testGenerateIfConfirmed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; test the generate if confirmed&quot;&quot;&quot;</span>
    <span class="n">template_path</span> <span class="o">=</span> <span class="n">path_helper</span><span class="o">.</span><span class="n">TemplatePath</span><span class="p">()</span>
    <span class="n">yapf_path</span> <span class="o">=</span> <span class="n">path_helper</span><span class="o">.</span><span class="n">YapfStyleFilePath</span><span class="p">()</span>

    <span class="k">with</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">TemporaryDirectory</span><span class="p">()</span> <span class="k">as</span> <span class="n">tmpdir</span><span class="p">:</span>
      <span class="n">file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">,</span> <span class="s1">&#39;testfile&#39;</span><span class="p">)</span>
      <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">file</span><span class="p">)</span><span class="o">.</span><span class="n">touch</span><span class="p">()</span>

      <span class="n">fake_execution</span> <span class="o">=</span> <span class="n">fake_sqlite_query_execution</span><span class="o">.</span><span class="n">SQLQueryExecution</span><span class="p">(</span>
          <span class="n">sql_query_data</span><span class="o">.</span><span class="n">SQLQueryData</span><span class="p">(</span><span class="n">has_error</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)])</span>
      <span class="p">)</span>

      <span class="n">output_handler</span> <span class="o">=</span> <span class="n">output_handler_file</span><span class="o">.</span><span class="n">OutputHandlerFile</span><span class="p">(</span>
          <span class="n">file</span><span class="p">,</span> <span class="n">file_handler</span><span class="o">.</span><span class="n">FileHandler</span><span class="p">(),</span> <span class="n">confirm</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
      <span class="n">plugin_helper</span> <span class="o">=</span> <span class="n">fake_sqlite_plugin_helper</span><span class="o">.</span><span class="n">FakeSQLitePluginHelper</span><span class="p">(</span>
          <span class="n">valid_name</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">change_bool_after_every_call_valid_name</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
      <span class="n">controller</span> <span class="o">=</span> <span class="n">sqlite_controller</span><span class="o">.</span><span class="n">SQLiteController</span><span class="p">(</span><span class="n">output_handler</span><span class="p">,</span>
                                                      <span class="n">plugin_helper</span><span class="p">)</span>

      <span class="n">controller</span><span class="o">.</span><span class="n">_path</span> <span class="o">=</span> <span class="n">tmpdir</span>
      <span class="n">controller</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="s2">&quot;the_plugin&quot;</span>
      <span class="n">controller</span><span class="o">.</span><span class="n">_testfile</span> <span class="o">=</span> <span class="n">file</span>
      <span class="n">controller</span><span class="o">.</span><span class="n">_query_execution</span> <span class="o">=</span> <span class="n">fake_execution</span>
      <span class="n">controller</span><span class="o">.</span><span class="n">Generate</span><span class="p">(</span><span class="n">template_path</span><span class="p">,</span> <span class="n">yapf_path</span><span class="p">)</span>
      <span class="n">file1</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">,</span> <span class="s1">&#39;plaso&#39;</span><span class="p">,</span> <span class="s1">&#39;formatters&#39;</span><span class="p">,</span> <span class="s1">&#39;the_plugin.py&#39;</span><span class="p">)</span>
      <span class="n">file2</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">,</span> <span class="s1">&#39;plaso&#39;</span><span class="p">,</span> <span class="s1">&#39;parsers&#39;</span><span class="p">,</span> <span class="s1">&#39;sqlite_plugins&#39;</span><span class="p">,</span>
                           <span class="s1">&#39;the_plugin.py&#39;</span><span class="p">)</span>
      <span class="n">file3</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">,</span> <span class="s1">&#39;tests&#39;</span><span class="p">,</span> <span class="s1">&#39;formatters&#39;</span><span class="p">,</span> <span class="s1">&#39;the_plugin.py&#39;</span><span class="p">)</span>
      <span class="n">file4</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">,</span> <span class="s1">&#39;tests&#39;</span><span class="p">,</span> <span class="s1">&#39;parsers&#39;</span><span class="p">,</span> <span class="s1">&#39;sqlite_plugins&#39;</span><span class="p">,</span>
                           <span class="s1">&#39;the_plugin.py&#39;</span><span class="p">)</span>
      <span class="n">file5</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">,</span> <span class="s1">&#39;test_data&#39;</span><span class="p">,</span> <span class="s1">&#39;the_plugin.&#39;</span><span class="p">)</span>
      <span class="n">file6</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">,</span> <span class="s1">&#39;plaso&#39;</span><span class="p">,</span> <span class="s1">&#39;parsers&#39;</span><span class="p">,</span> <span class="s1">&#39;sqlite_plugins&#39;</span><span class="p">,</span>
                           <span class="s1">&#39;__init__.py&#39;</span><span class="p">)</span>
      <span class="n">file7</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">,</span> <span class="s1">&#39;plaso&#39;</span><span class="p">,</span> <span class="s1">&#39;formatters&#39;</span><span class="p">,</span> <span class="s1">&#39;__init__.py&#39;</span><span class="p">)</span>
      <span class="n">expected</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;Do you want to Generate the files?create </span><span class="si">{0}</span><span class="s1">create </span><span class="si">{1}</span><span class="s1">&#39;</span>
                  <span class="s1">&#39;create </span><span class="si">{2}</span><span class="s1">create </span><span class="si">{3}</span><span class="s1">copy </span><span class="si">{4}</span><span class="s1">create </span><span class="si">{5}</span><span class="s1">create </span><span class="si">{6}</span><span class="s1">&#39;</span>
                  <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">file1</span><span class="p">,</span> <span class="n">file2</span><span class="p">,</span> <span class="n">file3</span><span class="p">,</span> <span class="n">file4</span><span class="p">,</span> <span class="n">file5</span><span class="p">,</span> <span class="n">file6</span><span class="p">,</span> <span class="n">file7</span><span class="p">))</span>

      <span class="n">actual</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ReadFromFile</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">actual</span><span class="p">)</span></div>

<div class="viewcode-block" id="SQLiteControllerTest.testGenerateIfNotConfirmed"><a class="viewcode-back" href="../../../../tests.frontend.controller.html#tests.frontend.controller.test_sqlite_controller.SQLiteControllerTest.testGenerateIfNotConfirmed">[docs]</a>  <span class="k">def</span> <span class="nf">testGenerateIfNotConfirmed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;test the generate if confirmed &quot;&quot;&quot;</span>
    <span class="n">template_path</span> <span class="o">=</span> <span class="n">path_helper</span><span class="o">.</span><span class="n">TemplatePath</span><span class="p">()</span>

    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">SystemExit</span><span class="p">):</span>
      <span class="k">with</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">TemporaryDirectory</span><span class="p">()</span> <span class="k">as</span> <span class="n">tmpdir</span><span class="p">:</span>
        <span class="n">file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">,</span> <span class="s1">&#39;testfile&#39;</span><span class="p">)</span>
        <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">file</span><span class="p">)</span><span class="o">.</span><span class="n">touch</span><span class="p">()</span>

        <span class="n">output_handler</span> <span class="o">=</span> <span class="n">output_handler_file</span><span class="o">.</span><span class="n">OutputHandlerFile</span><span class="p">(</span>
            <span class="n">file</span><span class="p">,</span> <span class="n">file_handler</span><span class="o">.</span><span class="n">FileHandler</span><span class="p">(),</span> <span class="n">confirm</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="n">plugin_helper</span> <span class="o">=</span> <span class="n">fake_sqlite_plugin_helper</span><span class="o">.</span><span class="n">FakeSQLitePluginHelper</span><span class="p">(</span>
            <span class="n">valid_name</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">change_bool_after_every_call_valid_name</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">controller</span> <span class="o">=</span> <span class="n">sqlite_controller</span><span class="o">.</span><span class="n">SQLiteController</span><span class="p">(</span><span class="n">output_handler</span><span class="p">,</span>
                                                        <span class="n">plugin_helper</span><span class="p">)</span>
        <span class="n">controller</span><span class="o">.</span><span class="n">Generate</span><span class="p">(</span><span class="s1">&#39;not used&#39;</span><span class="p">,</span> <span class="s1">&#39;not used&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">template_path</span><span class="p">)</span></div>

<div class="viewcode-block" id="SQLiteControllerTest.testIsDatabaseFolderIfTrue"><a class="viewcode-back" href="../../../../tests.frontend.controller.html#tests.frontend.controller.test_sqlite_controller.SQLiteControllerTest.testIsDatabaseFolderIfTrue">[docs]</a>  <span class="k">def</span> <span class="nf">testIsDatabaseFolderIfTrue</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;test the function isDatabase if the file is a database&quot;&quot;&quot;</span>
    <span class="n">controller</span> <span class="o">=</span> <span class="n">sqlite_controller</span><span class="o">.</span><span class="n">SQLiteController</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="n">actual</span> <span class="o">=</span> <span class="n">controller</span><span class="o">.</span><span class="n">_IsDatabaseFile</span><span class="p">(</span>
        <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path_helper</span><span class="o">.</span><span class="n">TestDatabasePath</span><span class="p">(),</span> <span class="s1">&#39;twitter_ios.db&#39;</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">actual</span><span class="p">)</span></div>

<div class="viewcode-block" id="SQLiteControllerTest.testIsDatabaseFolderIfFalse"><a class="viewcode-back" href="../../../../tests.frontend.controller.html#tests.frontend.controller.test_sqlite_controller.SQLiteControllerTest.testIsDatabaseFolderIfFalse">[docs]</a>  <span class="k">def</span> <span class="nf">testIsDatabaseFolderIfFalse</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;test the function isDatabase if the file is not a database&quot;&quot;&quot;</span>
    <span class="n">controller</span> <span class="o">=</span> <span class="n">sqlite_controller</span><span class="o">.</span><span class="n">SQLiteController</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="n">actual</span> <span class="o">=</span> <span class="n">controller</span><span class="o">.</span><span class="n">_IsDatabaseFile</span><span class="p">(</span>
        <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path_helper</span><span class="o">.</span><span class="n">TestDatabasePath</span><span class="p">(),</span> <span class="s1">&#39;twitter_ios_error.db&#39;</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">actual</span><span class="p">)</span></div>

<div class="viewcode-block" id="SQLiteControllerTest.testGetTimestampWithFake"><a class="viewcode-back" href="../../../../tests.frontend.controller.html#tests.frontend.controller.test_sqlite_controller.SQLiteControllerTest.testGetTimestampWithFake">[docs]</a>  <span class="k">def</span> <span class="nf">testGetTimestampWithFake</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;test the function GetTimestamp&quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">TemporaryDirectory</span><span class="p">()</span> <span class="k">as</span> <span class="n">tmpdir</span><span class="p">:</span>
      <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">,</span> <span class="s1">&#39;testfile&#39;</span><span class="p">)</span>
      <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="o">.</span><span class="n">touch</span><span class="p">()</span>

      <span class="n">output_handler</span> <span class="o">=</span> <span class="n">output_handler_file</span><span class="o">.</span><span class="n">OutputHandlerFile</span><span class="p">(</span>
          <span class="n">path</span><span class="p">,</span> <span class="n">file_handler</span><span class="o">.</span><span class="n">FileHandler</span><span class="p">(),</span> <span class="n">prompt_info</span><span class="o">=</span><span class="s1">&#39;that,other&#39;</span><span class="p">,</span>
          <span class="n">confirm_amount_same</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
      <span class="n">plugin_helper</span> <span class="o">=</span> <span class="n">fake_sqlite_plugin_helper</span><span class="o">.</span><span class="n">FakeSQLitePluginHelper</span><span class="p">(</span>
          <span class="n">assumed_timestamps</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;test&#39;</span><span class="p">],</span>
          <span class="n">columns_and_timestamp_column</span><span class="o">=</span><span class="p">([</span><span class="s1">&#39;this&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;that&#39;</span><span class="p">])</span>
      <span class="p">)</span>
      <span class="n">controller</span> <span class="o">=</span> <span class="n">sqlite_controller</span><span class="o">.</span><span class="n">SQLiteController</span><span class="p">(</span><span class="n">output_handler</span><span class="p">,</span>
                                                      <span class="n">plugin_helper</span><span class="p">)</span>
      <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">sql_query_column_model</span><span class="o">.</span><span class="n">SQLColumnModel</span><span class="p">(</span><span class="s1">&#39;this&#39;</span><span class="p">),</span>
                 <span class="n">sql_query_column_model</span><span class="o">.</span><span class="n">SQLColumnModel</span><span class="p">(</span><span class="s1">&#39;that&#39;</span><span class="p">),</span>
                 <span class="n">sql_query_column_model</span><span class="o">.</span><span class="n">SQLColumnModel</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">)]</span>

      <span class="n">model</span> <span class="o">=</span> <span class="n">controller</span><span class="o">.</span><span class="n">GetTimestamps</span><span class="p">(</span><span class="n">columns</span><span class="p">,</span> <span class="p">[])</span>
      <span class="n">expected</span> <span class="o">=</span> <span class="p">(</span>
          <span class="s1">&#39;Is the column a time event? &#39;</span>
          <span class="s1">&#39;testEnter (additional) timestamp events from the query &#39;</span>
          <span class="s1">&#39;[columnName,aliasName...] or [abort]&#39;</span>
          <span class="s1">&#39;Added: test,that&#39;</span>
          <span class="s1">&#39;Failed: other&#39;</span>
          <span class="s1">&#39;Do you want to add more timestamps?&#39;</span><span class="p">)</span>

      <span class="n">actual</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ReadFromFile</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">actual</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">model</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="mi">1</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">model</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="mi">1</span><span class="p">)</span></div>

<div class="viewcode-block" id="SQLiteControllerTest.testGetCustomizableNormal"><a class="viewcode-back" href="../../../../tests.frontend.controller.html#tests.frontend.controller.test_sqlite_controller.SQLiteControllerTest.testGetCustomizableNormal">[docs]</a>  <span class="k">def</span> <span class="nf">testGetCustomizableNormal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;test the function GetCustomizable&quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">TemporaryDirectory</span><span class="p">()</span> <span class="k">as</span> <span class="n">tmpdir</span><span class="p">:</span>
      <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">,</span> <span class="s1">&#39;testfile&#39;</span><span class="p">)</span>
      <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="o">.</span><span class="n">touch</span><span class="p">()</span>

      <span class="n">output_handler</span> <span class="o">=</span> <span class="n">output_handler_file</span><span class="o">.</span><span class="n">OutputHandlerFile</span><span class="p">(</span>
          <span class="n">path</span><span class="p">,</span> <span class="n">file_handler</span><span class="o">.</span><span class="n">FileHandler</span><span class="p">(),</span> <span class="n">prompt_info</span><span class="o">=</span><span class="s1">&#39;that,other&#39;</span><span class="p">,</span>
          <span class="n">confirm_amount_same</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

      <span class="n">plugin_helper</span> <span class="o">=</span> <span class="n">sqlite_plugin_helper</span><span class="o">.</span><span class="n">SQLitePluginHelper</span><span class="p">()</span>
      <span class="n">controller</span> <span class="o">=</span> <span class="n">sqlite_controller</span><span class="o">.</span><span class="n">SQLiteController</span><span class="p">(</span>
          <span class="n">output_handler</span><span class="p">,</span> <span class="n">plugin_helper</span><span class="p">)</span>

      <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">sql_query_column_model_data</span><span class="o">.</span><span class="n">SQLColumnModelData</span><span class="p">(</span><span class="s1">&#39;this&#39;</span><span class="p">),</span>
                 <span class="n">sql_query_column_model_data</span><span class="o">.</span><span class="n">SQLColumnModelData</span><span class="p">(</span><span class="s1">&#39;that&#39;</span><span class="p">),</span>
                 <span class="n">sql_query_column_model_data</span><span class="o">.</span><span class="n">SQLColumnModelData</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">)]</span>

      <span class="n">model</span> <span class="o">=</span> <span class="n">controller</span><span class="o">.</span><span class="n">GetCustomizable</span><span class="p">(</span><span class="n">columns</span><span class="p">)</span>
      <span class="n">expected</span> <span class="o">=</span> <span class="p">(</span>
          <span class="s1">&#39;Enter columns that are customizable [columnName,aliasName...] &#39;</span>
          <span class="s1">&#39;or [abort]&#39;</span>
          <span class="s1">&#39;Added: thatFailed: other&#39;</span>
          <span class="s1">&#39;Do you want to add more columns that are customizable?&#39;</span>
          <span class="s1">&#39;Enter columns that are customizable [columnName,aliasName...] or &#39;</span>
          <span class="s1">&#39;[abort]Added: thatFailed: other&#39;</span>
          <span class="s1">&#39;Do you want to add more columns that are customizable?&#39;</span><span class="p">)</span>

      <span class="n">actual</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ReadFromFile</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">actual</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">model</span><span class="p">),</span> <span class="mi">3</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">model</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">customize</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">model</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">customize</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">model</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">sql_column</span><span class="p">,</span> <span class="s1">&#39;that&#39;</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">model</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">customize</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span></div>

<div class="viewcode-block" id="SQLiteControllerTest.testGetCustomizableWithAbortToEarly"><a class="viewcode-back" href="../../../../tests.frontend.controller.html#tests.frontend.controller.test_sqlite_controller.SQLiteControllerTest.testGetCustomizableWithAbortToEarly">[docs]</a>  <span class="k">def</span> <span class="nf">testGetCustomizableWithAbortToEarly</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;test the function GetCustomizable&quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">TemporaryDirectory</span><span class="p">()</span> <span class="k">as</span> <span class="n">tmpdir</span><span class="p">:</span>
      <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">,</span> <span class="s1">&#39;testfile&#39;</span><span class="p">)</span>
      <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="o">.</span><span class="n">touch</span><span class="p">()</span>

      <span class="n">output_handler</span> <span class="o">=</span> <span class="n">output_handler_file</span><span class="o">.</span><span class="n">OutputHandlerFile</span><span class="p">(</span>
          <span class="n">path</span><span class="p">,</span> <span class="n">file_handler</span><span class="o">.</span><span class="n">FileHandler</span><span class="p">(),</span> <span class="n">prompt_info_list</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;abort&#39;</span><span class="p">,</span> <span class="s1">&#39;this&#39;</span><span class="p">],</span>
          <span class="n">confirm</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

      <span class="n">plugin_helper</span> <span class="o">=</span> <span class="n">sqlite_plugin_helper</span><span class="o">.</span><span class="n">SQLitePluginHelper</span><span class="p">()</span>
      <span class="n">controller</span> <span class="o">=</span> <span class="n">sqlite_controller</span><span class="o">.</span><span class="n">SQLiteController</span><span class="p">(</span>
          <span class="n">output_handler</span><span class="p">,</span> <span class="n">plugin_helper</span><span class="p">)</span>
      <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">sql_query_column_model_data</span><span class="o">.</span><span class="n">SQLColumnModelData</span><span class="p">(</span><span class="s1">&#39;this&#39;</span><span class="p">),</span>
                 <span class="n">sql_query_column_model_data</span><span class="o">.</span><span class="n">SQLColumnModelData</span><span class="p">(</span><span class="s1">&#39;that&#39;</span><span class="p">),</span>
                 <span class="n">sql_query_column_model_data</span><span class="o">.</span><span class="n">SQLColumnModelData</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">)]</span>

      <span class="n">model</span> <span class="o">=</span> <span class="n">controller</span><span class="o">.</span><span class="n">GetCustomizable</span><span class="p">(</span><span class="n">columns</span><span class="p">)</span>
      <span class="n">expected</span> <span class="o">=</span> <span class="p">(</span>
          <span class="s1">&#39;Enter columns that are customizable [columnName,aliasName...] &#39;</span>
          <span class="s1">&#39;or [abort]&#39;</span>
          <span class="s1">&#39;At least one column is required, please add a column&#39;</span>
          <span class="s1">&#39;Added: thisFailed: &#39;</span>
          <span class="s1">&#39;Do you want to add more columns that are customizable?&#39;</span><span class="p">)</span>

      <span class="n">actual</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ReadFromFile</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">actual</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">model</span><span class="p">),</span> <span class="mi">3</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">model</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">customize</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">model</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">customize</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">model</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">customize</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span></div>

<div class="viewcode-block" id="SQLiteControllerTest.testGetCustomizableWithAbort"><a class="viewcode-back" href="../../../../tests.frontend.controller.html#tests.frontend.controller.test_sqlite_controller.SQLiteControllerTest.testGetCustomizableWithAbort">[docs]</a>  <span class="k">def</span> <span class="nf">testGetCustomizableWithAbort</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;test the function GetCustomizable&quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">TemporaryDirectory</span><span class="p">()</span> <span class="k">as</span> <span class="n">tmpdir</span><span class="p">:</span>
      <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">,</span> <span class="s1">&#39;testfile&#39;</span><span class="p">)</span>
      <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="o">.</span><span class="n">touch</span><span class="p">()</span>

      <span class="n">output_handler</span> <span class="o">=</span> <span class="n">output_handler_file</span><span class="o">.</span><span class="n">OutputHandlerFile</span><span class="p">(</span>
          <span class="n">path</span><span class="p">,</span> <span class="n">file_handler</span><span class="o">.</span><span class="n">FileHandler</span><span class="p">(),</span> <span class="n">prompt_info_list</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;this&#39;</span><span class="p">,</span> <span class="s1">&#39;abort&#39;</span><span class="p">],</span>
          <span class="n">prompt_error</span><span class="o">=</span><span class="s1">&#39;this&#39;</span><span class="p">,</span> <span class="n">confirm</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

      <span class="n">plugin_helper</span> <span class="o">=</span> <span class="n">sqlite_plugin_helper</span><span class="o">.</span><span class="n">SQLitePluginHelper</span><span class="p">()</span>
      <span class="n">controller</span> <span class="o">=</span> <span class="n">sqlite_controller</span><span class="o">.</span><span class="n">SQLiteController</span><span class="p">(</span>
          <span class="n">output_handler</span><span class="p">,</span> <span class="n">plugin_helper</span><span class="p">)</span>
      <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">sql_query_column_model_data</span><span class="o">.</span><span class="n">SQLColumnModelData</span><span class="p">(</span><span class="s1">&#39;this&#39;</span><span class="p">),</span>
                 <span class="n">sql_query_column_model_data</span><span class="o">.</span><span class="n">SQLColumnModelData</span><span class="p">(</span><span class="s1">&#39;that&#39;</span><span class="p">),</span>
                 <span class="n">sql_query_column_model_data</span><span class="o">.</span><span class="n">SQLColumnModelData</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">)]</span>

      <span class="n">model</span> <span class="o">=</span> <span class="n">controller</span><span class="o">.</span><span class="n">GetCustomizable</span><span class="p">(</span><span class="n">columns</span><span class="p">)</span>

      <span class="n">expected</span> <span class="o">=</span> <span class="p">(</span>
          <span class="s1">&#39;Enter columns that are customizable [columnName,aliasName...] &#39;</span>
          <span class="s1">&#39;or [abort]&#39;</span>
          <span class="s1">&#39;Added: thisFailed: &#39;</span>
          <span class="s1">&#39;Do you want to add more columns that are customizable?&#39;</span>
          <span class="s1">&#39;Enter columns that are customizable [columnName,aliasName...] &#39;</span>
          <span class="s1">&#39;or [abort]&#39;</span><span class="p">)</span>

      <span class="n">actual</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ReadFromFile</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">actual</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">model</span><span class="p">),</span> <span class="mi">3</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">model</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">customize</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">model</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">customize</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">model</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">customize</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span></div>

<div class="viewcode-block" id="SQLiteControllerTest.testGetTimestampNormal"><a class="viewcode-back" href="../../../../tests.frontend.controller.html#tests.frontend.controller.test_sqlite_controller.SQLiteControllerTest.testGetTimestampNormal">[docs]</a>  <span class="k">def</span> <span class="nf">testGetTimestampNormal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;test the function GetTimestamp&quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">TemporaryDirectory</span><span class="p">()</span> <span class="k">as</span> <span class="n">tmpdir</span><span class="p">:</span>
      <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">,</span> <span class="s1">&#39;testfile&#39;</span><span class="p">)</span>
      <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="o">.</span><span class="n">touch</span><span class="p">()</span>

      <span class="n">output_handler</span> <span class="o">=</span> <span class="n">output_handler_file</span><span class="o">.</span><span class="n">OutputHandlerFile</span><span class="p">(</span>
          <span class="n">path</span><span class="p">,</span> <span class="n">file_handler</span><span class="o">.</span><span class="n">FileHandler</span><span class="p">(),</span> <span class="n">prompt_info</span><span class="o">=</span><span class="s1">&#39;thisdate,other,test&#39;</span><span class="p">,</span>
          <span class="n">confirm_amount_same</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
      <span class="n">plugin_helper</span> <span class="o">=</span> <span class="n">sqlite_plugin_helper</span><span class="o">.</span><span class="n">SQLitePluginHelper</span><span class="p">()</span>
      <span class="n">controller</span> <span class="o">=</span> <span class="n">sqlite_controller</span><span class="o">.</span><span class="n">SQLiteController</span><span class="p">(</span>
          <span class="n">output_handler</span><span class="p">,</span> <span class="n">plugin_helper</span><span class="p">)</span>

      <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">sql_query_column_model</span><span class="o">.</span><span class="n">SQLColumnModel</span><span class="p">(</span><span class="s1">&#39;this&#39;</span><span class="p">),</span>
                 <span class="n">sql_query_column_model</span><span class="o">.</span><span class="n">SQLColumnModel</span><span class="p">(</span><span class="s1">&#39;that&#39;</span><span class="p">),</span>
                 <span class="n">sql_query_column_model</span><span class="o">.</span><span class="n">SQLColumnModel</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">),</span>
                 <span class="n">sql_query_column_model</span><span class="o">.</span><span class="n">SQLColumnModel</span><span class="p">(</span><span class="s1">&#39;thisdate&#39;</span><span class="p">),</span>
                 <span class="n">sql_query_column_model</span><span class="o">.</span><span class="n">SQLColumnModel</span><span class="p">(</span><span class="s1">&#39;timethat&#39;</span><span class="p">)]</span>

      <span class="n">model</span> <span class="o">=</span> <span class="n">controller</span><span class="o">.</span><span class="n">GetTimestamps</span><span class="p">(</span><span class="n">columns</span><span class="p">,</span> <span class="p">[])</span>
      <span class="n">expected</span> <span class="o">=</span> <span class="p">(</span>
          <span class="s1">&#39;Is the column a time event? thisdate&#39;</span>
          <span class="s1">&#39;Is the column a time event? timethat&#39;</span>
          <span class="s1">&#39;Enter (additional) timestamp events from the query &#39;</span>
          <span class="s1">&#39;[columnName,aliasName...] or [abort]&#39;</span>
          <span class="s1">&#39;Added: test,thisdate,timethat&#39;</span>
          <span class="s1">&#39;Failed: other&#39;</span>
          <span class="s1">&#39;Do you want to add more timestamps?&#39;</span>
      <span class="p">)</span>
      <span class="n">actual</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ReadFromFile</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">actual</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">model</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="mi">2</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">model</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="mi">3</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">model</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">sql_column</span><span class="p">,</span> <span class="s1">&#39;this&#39;</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">model</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">sql_column</span><span class="p">,</span> <span class="s1">&#39;that&#39;</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">model</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">sql_column</span><span class="p">,</span> <span class="s1">&#39;test&#39;</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">model</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">sql_column</span><span class="p">,</span> <span class="s1">&#39;thisdate&#39;</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">model</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">sql_column</span><span class="p">,</span> <span class="s1">&#39;timethat&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="SQLiteControllerTest.testGetTimestampNormalWithAbort"><a class="viewcode-back" href="../../../../tests.frontend.controller.html#tests.frontend.controller.test_sqlite_controller.SQLiteControllerTest.testGetTimestampNormalWithAbort">[docs]</a>  <span class="k">def</span> <span class="nf">testGetTimestampNormalWithAbort</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;test the function GetTimestamp&quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">TemporaryDirectory</span><span class="p">()</span> <span class="k">as</span> <span class="n">tmpdir</span><span class="p">:</span>
      <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">,</span> <span class="s1">&#39;testfile&#39;</span><span class="p">)</span>
      <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="o">.</span><span class="n">touch</span><span class="p">()</span>

      <span class="n">output_handler</span> <span class="o">=</span> <span class="n">output_handler_file</span><span class="o">.</span><span class="n">OutputHandlerFile</span><span class="p">(</span>
          <span class="n">path</span><span class="p">,</span> <span class="n">file_handler</span><span class="o">.</span><span class="n">FileHandler</span><span class="p">(),</span> <span class="n">prompt_info</span><span class="o">=</span><span class="s1">&#39;abort&#39;</span><span class="p">,</span>
          <span class="n">confirm_amount_same</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
      <span class="n">plugin_helper</span> <span class="o">=</span> <span class="n">sqlite_plugin_helper</span><span class="o">.</span><span class="n">SQLitePluginHelper</span><span class="p">()</span>
      <span class="n">controller</span> <span class="o">=</span> <span class="n">sqlite_controller</span><span class="o">.</span><span class="n">SQLiteController</span><span class="p">(</span>
          <span class="n">output_handler</span><span class="p">,</span> <span class="n">plugin_helper</span><span class="p">)</span>

      <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">sql_query_column_model</span><span class="o">.</span><span class="n">SQLColumnModel</span><span class="p">(</span><span class="s1">&#39;this&#39;</span><span class="p">),</span>
                 <span class="n">sql_query_column_model</span><span class="o">.</span><span class="n">SQLColumnModel</span><span class="p">(</span><span class="s1">&#39;that&#39;</span><span class="p">),</span>
                 <span class="n">sql_query_column_model</span><span class="o">.</span><span class="n">SQLColumnModel</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">),</span>
                 <span class="n">sql_query_column_model</span><span class="o">.</span><span class="n">SQLColumnModel</span><span class="p">(</span><span class="s1">&#39;thisdate&#39;</span><span class="p">),</span>
                 <span class="n">sql_query_column_model</span><span class="o">.</span><span class="n">SQLColumnModel</span><span class="p">(</span><span class="s1">&#39;timethat&#39;</span><span class="p">)]</span>

      <span class="n">model</span> <span class="o">=</span> <span class="n">controller</span><span class="o">.</span><span class="n">GetTimestamps</span><span class="p">(</span><span class="n">columns</span><span class="p">,</span> <span class="p">[])</span>
      <span class="n">expected</span> <span class="o">=</span> <span class="p">(</span>
          <span class="s1">&#39;Is the column a time event? thisdate&#39;</span>
          <span class="s1">&#39;Is the column a time event? timethat&#39;</span>
          <span class="s1">&#39;Enter (additional) timestamp events from the query &#39;</span>
          <span class="s1">&#39;[columnName,aliasName...] or [abort]&#39;</span>
      <span class="p">)</span>

      <span class="n">actual</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ReadFromFile</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">actual</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">model</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="mi">3</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">model</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="mi">2</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">model</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">sql_column</span><span class="p">,</span> <span class="s1">&#39;this&#39;</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">model</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">sql_column</span><span class="p">,</span> <span class="s1">&#39;that&#39;</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">model</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">sql_column</span><span class="p">,</span> <span class="s1">&#39;test&#39;</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">model</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">sql_column</span><span class="p">,</span> <span class="s1">&#39;thisdate&#39;</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">model</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">sql_column</span><span class="p">,</span> <span class="s1">&#39;timethat&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="SQLiteControllerTest.testGetTimestampRefuseATimeEvent"><a class="viewcode-back" href="../../../../tests.frontend.controller.html#tests.frontend.controller.test_sqlite_controller.SQLiteControllerTest.testGetTimestampRefuseATimeEvent">[docs]</a>  <span class="k">def</span> <span class="nf">testGetTimestampRefuseATimeEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;test the function GetTimestamp&quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">TemporaryDirectory</span><span class="p">()</span> <span class="k">as</span> <span class="n">tmpdir</span><span class="p">:</span>
      <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">,</span> <span class="s1">&#39;testfile&#39;</span><span class="p">)</span>
      <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="o">.</span><span class="n">touch</span><span class="p">()</span>

      <span class="n">output_handler</span> <span class="o">=</span> <span class="n">output_handler_file</span><span class="o">.</span><span class="n">OutputHandlerFile</span><span class="p">(</span>
          <span class="n">path</span><span class="p">,</span> <span class="n">file_handler</span><span class="o">.</span><span class="n">FileHandler</span><span class="p">(),</span> <span class="n">prompt_info</span><span class="o">=</span><span class="s1">&#39;test,other&#39;</span><span class="p">,</span>
          <span class="n">confirm_amount_same</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
      <span class="n">plugin_helper</span> <span class="o">=</span> <span class="n">sqlite_plugin_helper</span><span class="o">.</span><span class="n">SQLitePluginHelper</span><span class="p">()</span>
      <span class="n">controller</span> <span class="o">=</span> <span class="n">sqlite_controller</span><span class="o">.</span><span class="n">SQLiteController</span><span class="p">(</span>
          <span class="n">output_handler</span><span class="p">,</span> <span class="n">plugin_helper</span><span class="p">)</span>

      <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">sql_query_column_model</span><span class="o">.</span><span class="n">SQLColumnModel</span><span class="p">(</span><span class="s1">&#39;this&#39;</span><span class="p">),</span>
                 <span class="n">sql_query_column_model</span><span class="o">.</span><span class="n">SQLColumnModel</span><span class="p">(</span><span class="s1">&#39;that&#39;</span><span class="p">),</span>
                 <span class="n">sql_query_column_model</span><span class="o">.</span><span class="n">SQLColumnModel</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">),</span>
                 <span class="n">sql_query_column_model</span><span class="o">.</span><span class="n">SQLColumnModel</span><span class="p">(</span><span class="s1">&#39;thisdate&#39;</span><span class="p">),</span>
                 <span class="n">sql_query_column_model</span><span class="o">.</span><span class="n">SQLColumnModel</span><span class="p">(</span><span class="s1">&#39;timethat&#39;</span><span class="p">)]</span>

      <span class="n">model</span> <span class="o">=</span> <span class="n">controller</span><span class="o">.</span><span class="n">GetTimestamps</span><span class="p">(</span><span class="n">columns</span><span class="p">,</span> <span class="p">[])</span>
      <span class="n">expected</span> <span class="o">=</span> <span class="p">(</span>
          <span class="s1">&#39;Is the column a time event? thisdate&#39;</span>
          <span class="s1">&#39;Is the column a time event? timethat&#39;</span>
          <span class="s1">&#39;Enter (additional) timestamp events from the query &#39;</span>
          <span class="s1">&#39;[columnName,aliasName...] or [abort]&#39;</span>
          <span class="s1">&#39;Added: test,thisdate&#39;</span>
          <span class="s1">&#39;Failed: other&#39;</span>
          <span class="s1">&#39;Do you want to add more timestamps?&#39;</span>
      <span class="p">)</span>

      <span class="n">actual</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ReadFromFile</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">actual</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">model</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="mi">3</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">model</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="mi">2</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">model</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">sql_column</span><span class="p">,</span> <span class="s1">&#39;this&#39;</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">model</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">sql_column</span><span class="p">,</span> <span class="s1">&#39;that&#39;</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">model</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">sql_column</span><span class="p">,</span> <span class="s1">&#39;timethat&#39;</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">model</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">sql_column</span><span class="p">,</span> <span class="s1">&#39;test&#39;</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">model</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">sql_column</span><span class="p">,</span> <span class="s1">&#39;thisdate&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="SQLiteControllerTest.testGetTimestampRefuseAllTimeEvent"><a class="viewcode-back" href="../../../../tests.frontend.controller.html#tests.frontend.controller.test_sqlite_controller.SQLiteControllerTest.testGetTimestampRefuseAllTimeEvent">[docs]</a>  <span class="k">def</span> <span class="nf">testGetTimestampRefuseAllTimeEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;test the function GetTimestamp&quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">TemporaryDirectory</span><span class="p">()</span> <span class="k">as</span> <span class="n">tmpdir</span><span class="p">:</span>
      <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">,</span> <span class="s1">&#39;testfile&#39;</span><span class="p">)</span>
      <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="o">.</span><span class="n">touch</span><span class="p">()</span>

      <span class="n">output_handler</span> <span class="o">=</span> <span class="n">output_handler_file</span><span class="o">.</span><span class="n">OutputHandlerFile</span><span class="p">(</span>
          <span class="n">path</span><span class="p">,</span> <span class="n">file_handler</span><span class="o">.</span><span class="n">FileHandler</span><span class="p">(),</span> <span class="n">prompt_info</span><span class="o">=</span><span class="s1">&#39;test,other&#39;</span><span class="p">,</span>
          <span class="n">confirm</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
      <span class="n">plugin_helper</span> <span class="o">=</span> <span class="n">sqlite_plugin_helper</span><span class="o">.</span><span class="n">SQLitePluginHelper</span><span class="p">()</span>
      <span class="n">controller</span> <span class="o">=</span> <span class="n">sqlite_controller</span><span class="o">.</span><span class="n">SQLiteController</span><span class="p">(</span>
          <span class="n">output_handler</span><span class="p">,</span> <span class="n">plugin_helper</span><span class="p">)</span>

      <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">sql_query_column_model</span><span class="o">.</span><span class="n">SQLColumnModel</span><span class="p">(</span><span class="s1">&#39;this&#39;</span><span class="p">),</span>
                 <span class="n">sql_query_column_model</span><span class="o">.</span><span class="n">SQLColumnModel</span><span class="p">(</span><span class="s1">&#39;that&#39;</span><span class="p">),</span>
                 <span class="n">sql_query_column_model</span><span class="o">.</span><span class="n">SQLColumnModel</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">),</span>
                 <span class="n">sql_query_column_model</span><span class="o">.</span><span class="n">SQLColumnModel</span><span class="p">(</span><span class="s1">&#39;thisdate&#39;</span><span class="p">),</span>
                 <span class="n">sql_query_column_model</span><span class="o">.</span><span class="n">SQLColumnModel</span><span class="p">(</span><span class="s1">&#39;timethat&#39;</span><span class="p">)]</span>

      <span class="n">model</span> <span class="o">=</span> <span class="n">controller</span><span class="o">.</span><span class="n">GetTimestamps</span><span class="p">(</span><span class="n">columns</span><span class="p">,</span> <span class="p">[])</span>
      <span class="n">expected</span> <span class="o">=</span> <span class="p">(</span>
          <span class="s1">&#39;Is the column a time event? this&#39;</span>
          <span class="s1">&#39;dateIs the column a time event? timethat&#39;</span>
          <span class="s1">&#39;Enter (additional) timestamp events from the query &#39;</span>
          <span class="s1">&#39;[columnName,aliasName...] or [abort]&#39;</span>
          <span class="s1">&#39;At least one timestamp is required, please add a timestamp&#39;</span>
          <span class="s1">&#39;Added: test&#39;</span>
          <span class="s1">&#39;Failed: other&#39;</span>
          <span class="s1">&#39;Do you want to add more timestamps?&#39;</span>
      <span class="p">)</span>

      <span class="n">actual</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ReadFromFile</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">actual</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">model</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="mi">4</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">model</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="mi">1</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">model</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">sql_column</span><span class="p">,</span> <span class="s1">&#39;this&#39;</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">model</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">sql_column</span><span class="p">,</span> <span class="s1">&#39;that&#39;</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">model</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">sql_column</span><span class="p">,</span> <span class="s1">&#39;thisdate&#39;</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">model</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">sql_column</span><span class="p">,</span> <span class="s1">&#39;timethat&#39;</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">model</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">sql_column</span><span class="p">,</span> <span class="s1">&#39;test&#39;</span><span class="p">)</span></div>

  <span class="k">def</span> <span class="nf">_ReadFromFile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Read from file</span>

<span class="sd">    Args:</span>
<span class="sd">      path (str): the file path</span>

<span class="sd">      path (str): the file path</span>

<span class="sd">    Returns:</span>
<span class="sd">      str: content of the file&quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
      <span class="k">return</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
    <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">path</span><span class="p">)</span></div>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
  <span class="n">unittest</span><span class="o">.</span><span class="n">main</span><span class="p">()</span>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../../index.html">Plaso Sqlite Plugin Scaffolder 20170614 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../../index.html" >Module code</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, Claudia Saxer.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.5.5.
    </div>
  </body>
</html>